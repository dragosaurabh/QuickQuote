(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[117],{9515:function(e,t,n){Promise.resolve().then(n.bind(n,2252))},2252:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var s=n(9566),i=n(8590),r=n(6555),u=n(2616),a=n(4134);function o(){let e=(0,r.useParams)().id,[t,n]=(0,i.useState)(null),[o,d]=(0,i.useState)(!0),[c,l]=(0,i.useState)(null);return((0,i.useEffect)(()=>{(async function(){if(!e){l("Quote ID is required"),d(!1);return}try{let t;let s=(0,u.createClientComponentClient)(),{data:i,error:r}=await s.from("quotes").select("\n            *,\n            customers (*),\n            quote_items (*)\n          ").eq("id",e).single();if(r)throw Error(r.message);if(!i){l("Quote not found"),d(!1);return}let{data:a,error:o}=await s.from("businesses").select("*").eq("id",i.business_id).single();if(o)throw Error(o.message);if(!a){l("Business not found"),d(!1);return}let c={id:i.id,businessId:i.business_id,customerId:i.customer_id||void 0,quoteNumber:i.quote_number,status:i.status,subtotal:i.subtotal,discountType:i.discount_type||void 0,discountValue:i.discount_value,total:i.total,notes:i.notes||void 0,terms:i.terms||void 0,validUntil:i.valid_until?new Date(i.valid_until):void 0,createdAt:new Date(i.created_at),updatedAt:new Date(i.updated_at)},m={id:a.id,userId:a.user_id,name:a.name,logoUrl:a.logo_url||void 0,phone:a.phone||void 0,email:a.email||void 0,address:a.address||void 0,defaultTerms:a.default_terms||void 0,defaultValidityDays:a.default_validity_days,createdAt:new Date(a.created_at),updatedAt:new Date(a.updated_at)};if(i.customers){let e=i.customers;t={id:e.id,businessId:e.business_id,name:e.name,phone:e.phone,email:e.email||void 0,address:e.address||void 0,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}}let f=(i.quote_items||[]).map(e=>({id:e.id,quoteId:e.quote_id,serviceId:e.service_id||void 0,serviceName:e.service_name,quantity:e.quantity,unitPrice:e.unit_price,totalPrice:e.total_price,createdAt:new Date(e.created_at)}));n({quote:c,business:m,customer:t,items:f}),d(!1)}catch(e){l(e instanceof Error?e.message:"Failed to load quote"),d(!1)}})()},[e]),o)?(0,s.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,s.jsx)(a.TK,{size:"lg",customMessage:"Summoning your quote from the shadows..."})}):c||!t?(0,s.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center p-8",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDC7B"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-text-primary mb-2",children:"Quote Not Found"}),(0,s.jsx)("p",{className:"text-text-muted",children:c||"This quote has vanished into the mist..."})]})}):(0,s.jsx)(a.VW,{children:(0,s.jsx)("div",{className:"min-h-screen bg-background py-8 px-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-text-primary mb-2",children:"\uD83C\uDF83 SpookyQuote"}),(0,s.jsx)("p",{className:"text-text-muted",children:"Professional quotes with a spooky twist"})]}),(0,s.jsx)(a.Jc,{quote:t.quote,business:t.business,customer:t.customer,items:t.items,showActions:!1}),(0,s.jsx)("div",{className:"mt-6 flex justify-center",children:(0,s.jsx)(a.IW,{quote:t.quote,business:t.business,customer:t.customer})}),(0,s.jsx)("div",{className:"mt-8 text-center text-text-muted text-sm",children:(0,s.jsx)("p",{children:"Powered by SpookyQuote \uD83D\uDC7B"})})]})})})}},4134:function(e,t,n){"use strict";n.d(t,{zx:function(){return s.Button},Zb:function(){return r.Card},aY:function(){return r.CardContent},Ol:function(){return r.CardHeader},ll:function(){return r.CardTitle},bu:function(){return d.CustomerList},II:function(){return i.Input},TK:function(){return u.TK},NZ:function(){return a.OnboardingWizard},NV:function(){return h.QuickActions},zc:function(){return c.QuoteCreationForm},vD:function(){return f.QuoteList},Jc:function(){return l.QuotePreview},IW:function(){return m.QuoteShare},j9:function(){return v.RecentQuotes},$4:function(){return o.ServiceList},NF:function(){return _.SettingsPage},Ai:function(){return x.StatsCard},VW:function(){return u.VW},pm:function(){return u.pm}});var s=n(7046),i=n(822);n(1528),n(2518),n(1655);var r=n(5996);n(1140),n(2860),n(9695),n(4244);var u=n(1979);n(3512);var a=n(4014);n(7967),n(4520);var o=n(2638);n(2236),n(6222);var d=n(630);n(6822),n(8304),n(3770),n(4592),n(3347);var c=n(5200),l=n(7200);n(6119);var m=n(4251),f=n(5708),x=n(784),v=n(3357),h=n(6715),_=n(9694)}},function(e){e.O(0,[959,928,40,977,844,560],function(){return e(e.s=9515)}),_N_E=e.O()}]);