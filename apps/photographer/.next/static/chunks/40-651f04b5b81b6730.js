"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{3512:function(e,t,r){r.d(t,{AuthProvider:function(){return i},useAuthContext:function(){return o}});var s=r(9566),a=r(8590),n=r(6143);let l=(0,a.createContext)(null);function i(e){let{children:t}=e,r=(0,n.a)();return(0,s.jsx)(l.Provider,{value:r,children:t})}function o(){let e=(0,a.useContext)(l);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e}},6222:function(e,t,r){r.d(t,{CustomerCard:function(){return a}});var s=r(9566);r(8590);let a=e=>{let{customer:t,onEdit:r,onSelect:a,isSelected:n=!1,selectable:l=!1}=e,i=()=>{l&&a&&a(t)};return(0,s.jsx)("div",{className:"bg-surface border rounded-lg p-4 transition-colors ".concat(l?"cursor-pointer":""," ").concat(n?"border-primary bg-primary/10":"border-primary/20 hover:border-primary/40"),onClick:i,role:l?"button":void 0,tabIndex:l?0:void 0,onKeyDown:l?e=>"Enter"===e.key&&i():void 0,children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("h3",{className:"text-text-primary font-medium truncate",children:t.name}),n&&(0,s.jsx)("span",{className:"text-primary text-sm",children:"✓"})]}),(0,s.jsxs)("p",{className:"text-text-muted text-sm flex items-center gap-1",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),t.phone]}),t.email&&(0,s.jsxs)("p",{className:"text-text-muted text-sm flex items-center gap-1 mt-1",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),(0,s.jsx)("span",{className:"truncate",children:t.email})]}),t.address&&(0,s.jsxs)("p",{className:"text-text-muted text-sm flex items-center gap-1 mt-1",children:[(0,s.jsxs)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsx)("span",{className:"truncate",children:t.address})]})]}),!l&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),r(t)},className:"p-2 rounded-lg hover:bg-primary/10 transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Edit ".concat(t.name),children:(0,s.jsx)("svg",{className:"w-5 h-5 text-text-muted hover:text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})})}},2236:function(e,t,r){r.d(t,{CustomerForm:function(){return c}});var s=r(9566),a=r(8590),n=r(7046),l=r(822),i=r(1655),o=r(4742);let c=e=>{let{customer:t,onSubmit:r,onCancel:c,isLoading:d=!1,compact:u=!1}=e,[m,x]=(0,a.useState)({name:"",phone:"",email:"",address:""}),[p,h]=(0,a.useState)({});(0,a.useEffect)(()=>{t&&x({name:t.name,phone:t.phone,email:t.email||"",address:t.address||""})},[t]);let g=e=>{let{name:t,value:r}=e.target;x(e=>({...e,[t]:r})),p[t]&&h(e=>({...e,[t]:""}))},f=async e=>{e.preventDefault();let t=o._K.safeParse(m);if(!t.success){let e={};t.error.errors.forEach(t=>{t.path[0]&&(e[t.path[0]]=t.message)}),h(e);return}try{await r(m)}catch(e){h({_form:e instanceof Error?e.message:"Failed to save customer"})}};return(0,s.jsxs)("form",{onSubmit:f,className:u?"space-y-3":"space-y-4",children:[p._form&&(0,s.jsx)("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm",children:p._form}),(0,s.jsx)(l.Input,{label:"Customer Name",name:"name",value:m.name,onChange:g,error:p.name,placeholder:"e.g., John Smith",required:!0}),(0,s.jsx)(l.Input,{label:"Phone Number",name:"phone",type:"tel",value:m.phone,onChange:g,error:p.phone,placeholder:"e.g., +1 555-123-4567",required:!0}),(0,s.jsx)(l.Input,{label:"Email (optional)",name:"email",type:"email",value:m.email||"",onChange:g,error:p.email,placeholder:"e.g., john@example.com"}),!u&&(0,s.jsx)(i.TextArea,{label:"Address (optional)",name:"address",value:m.address||"",onChange:g,error:p.address,placeholder:"Enter customer address...",rows:2}),(0,s.jsxs)("div",{className:"flex gap-3 ".concat(u?"pt-2":"pt-4"),children:[(0,s.jsx)(n.Button,{type:"button",variant:"secondary",onClick:c,disabled:d,children:"Cancel"}),(0,s.jsx)(n.Button,{type:"submit",variant:"primary",isLoading:d,className:"flex-1",children:t?"Update Customer":"Add Customer"})]})]})}},630:function(e,t,r){r.d(t,{CustomerList:function(){return u}});var s=r(9566),a=r(8590),n=r(6222),l=r(2236),i=r(4202),o=r(7046),c=r(822),d=r(7521);let u=e=>{let{customers:t,loading:r,error:u,onCreateCustomer:m,onUpdateCustomer:x,onRefetch:p,createLoading:h=!1,updateLoading:g=!1}=e,[f,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)(null),[v,N]=(0,a.useState)(""),w=(0,a.useMemo)(()=>{if(!v.trim())return t;let e=v.toLowerCase().trim();return t.filter(t=>t.name.toLowerCase().includes(e)||t.phone.includes(v)||t.email&&t.email.toLowerCase().includes(e))},[t,v]),C=async e=>{await m(e)&&(b(!1),await p())},D=async e=>{y&&await x(y.id,e)&&(j(null),await p())};return r?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(d.LoadingSpinner,{customMessage:"Summoning your customers..."})}):u?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("p",{className:"text-red-400 mb-4",children:"Something spooky happened! \uD83D\uDC7B"}),(0,s.jsx)("p",{className:"text-text-muted mb-4",children:u.message}),(0,s.jsx)(o.Button,{variant:"secondary",onClick:p,children:"Try Again"})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-text-primary",children:"Customers"}),(0,s.jsx)("p",{className:"text-text-muted text-sm",children:"Manage your customer contacts"})]}),(0,s.jsx)(o.Button,{variant:"primary",onClick:()=>b(!0),children:"+ Add Customer"})]}),t.length>0&&(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.Input,{placeholder:"Search customers by name, phone, or email...",value:v,onChange:e=>N(e.target.value),className:"pl-10"}),(0,s.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),0===t.length?(0,s.jsxs)("div",{className:"text-center py-12 bg-surface border border-primary/20 rounded-lg",children:[(0,s.jsx)("p",{className:"text-text-muted mb-4",children:"No customers yet. Add your first customer to get started!"}),(0,s.jsx)(o.Button,{variant:"primary",onClick:()=>b(!0),children:"+ Add Your First Customer"})]}):0===w.length?(0,s.jsx)("div",{className:"text-center py-12 bg-surface border border-primary/20 rounded-lg",children:(0,s.jsxs)("p",{className:"text-text-muted",children:['No customers found matching "',v,'"']})}):(0,s.jsx)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:w.map(e=>(0,s.jsx)(n.CustomerCard,{customer:e,onEdit:j},e.id))}),v&&w.length>0&&(0,s.jsxs)("p",{className:"text-text-muted text-sm",children:["Found ",w.length," customer",1!==w.length?"s":""]}),(0,s.jsx)(i.Modal,{isOpen:f,onClose:()=>b(!1),title:"Add New Customer",size:"md",children:(0,s.jsx)(l.CustomerForm,{onSubmit:C,onCancel:()=>b(!1),isLoading:h})}),(0,s.jsx)(i.Modal,{isOpen:!!y,onClose:()=>j(null),title:"Edit Customer",size:"md",children:(0,s.jsx)(l.CustomerForm,{customer:y,onSubmit:D,onCancel:()=>j(null),isLoading:g})})]})}},6822:function(e,t,r){r.d(t,{InlineCustomerForm:function(){return o}});var s=r(9566),a=r(8590),n=r(7046),l=r(822),i=r(4742);let o=e=>{let{onSubmit:t,onCancel:r,isLoading:o=!1}=e,[c,d]=(0,a.useState)({name:"",phone:"",email:"",address:""}),[u,m]=(0,a.useState)({}),x=e=>{let{name:t,value:r}=e.target;d(e=>({...e,[t]:r})),u[t]&&m(e=>({...e,[t]:""}))},p=async e=>{e.preventDefault();let r=i._K.safeParse(c);if(!r.success){let e={};r.error.errors.forEach(t=>{t.path[0]&&(e[t.path[0]]=t.message)}),m(e);return}try{await t(c)}catch(e){m({_form:e instanceof Error?e.message:"Failed to create customer"})}};return(0,s.jsxs)("form",{onSubmit:p,className:"p-4 bg-surface/50 border border-primary/20 rounded-lg space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-accent",children:"\uD83D\uDC64"}),(0,s.jsx)("h4",{className:"text-sm font-medium text-text-primary",children:"Quick Add Customer"})]}),u._form&&(0,s.jsx)("div",{className:"p-2 bg-red-500/10 border border-red-500/30 rounded text-red-400 text-xs",children:u._form}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,s.jsx)(l.Input,{label:"Name",name:"name",value:c.name,onChange:x,error:u.name,placeholder:"Customer name",required:!0}),(0,s.jsx)(l.Input,{label:"Phone",name:"phone",type:"tel",value:c.phone,onChange:x,error:u.phone,placeholder:"Phone number",required:!0})]}),(0,s.jsx)(l.Input,{label:"Email (optional)",name:"email",type:"email",value:c.email||"",onChange:x,error:u.email,placeholder:"Email address"}),(0,s.jsxs)("div",{className:"flex gap-2 pt-1",children:[(0,s.jsx)(n.Button,{type:"button",variant:"secondary",size:"sm",onClick:r,disabled:o,children:"Cancel"}),(0,s.jsx)(n.Button,{type:"submit",variant:"primary",size:"sm",isLoading:o,children:"Add & Select"})]})]})}},6715:function(e,t,r){r.d(t,{QuickActions:function(){return n}});var s=r(9566);r(8590);var a=r(7046);function n(e){let{onCreateQuote:t,onViewAllQuotes:r,onManageServices:n,onManageCustomers:l,onSettings:i,className:o=""}=e;return(0,s.jsxs)("div",{className:"\n        bg-surface rounded-xl p-6 \n        border border-halloween-purple/20\n        ".concat(o,"\n      "),children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-text mb-4",children:"Quick Actions ⚡"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)(a.Button,{variant:"primary",onClick:t,className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{children:"✨"}),(0,s.jsx)("span",{children:"Create Quote"})]}),(0,s.jsxs)(a.Button,{variant:"secondary",onClick:r,className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{children:"\uD83D\uDCCB"}),(0,s.jsx)("span",{children:"View All"})]}),(0,s.jsxs)(a.Button,{variant:"ghost",onClick:n,className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{children:"\uD83D\uDEE0️"}),(0,s.jsx)("span",{children:"Services"})]}),(0,s.jsxs)(a.Button,{variant:"ghost",onClick:l,className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{children:"\uD83D\uDC65"}),(0,s.jsx)("span",{children:"Customers"})]}),(0,s.jsxs)(a.Button,{variant:"ghost",onClick:i,className:"flex items-center justify-center gap-2 col-span-2",children:[(0,s.jsx)("span",{children:"⚙️"}),(0,s.jsx)("span",{children:"Settings"})]})]})]})}},3357:function(e,t,r){r.d(t,{RecentQuotes:function(){return n}});var s=r(9566);r(8590);var a=r(1979);function n(e){let{quotes:t,onViewQuote:r,className:n=""}=e,l=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),i=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return 0===t.length?(0,s.jsxs)("div",{className:"\n          bg-surface rounded-xl p-6 \n          border border-halloween-purple/20\n          ".concat(n,"\n        "),children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-text mb-4",children:"Recent Quotes \uD83D\uDCDC"}),(0,s.jsx)("p",{className:"text-text-muted text-center py-8",children:"No quotes yet. Create your first spooky quote! \uD83C\uDF83"})]}):(0,s.jsxs)("div",{className:"\n        bg-surface rounded-xl p-6 \n        border border-halloween-purple/20\n        ".concat(n,"\n      "),children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-text mb-4",children:"Recent Quotes \uD83D\uDCDC"}),(0,s.jsx)("div",{className:"space-y-3",children:t.map(e=>{var t;return(0,s.jsxs)("div",{onClick:()=>null==r?void 0:r(e.id),className:"\n              flex items-center justify-between p-3 rounded-lg\n              bg-background/50 hover:bg-background\n              transition-colors duration-200\n              ".concat(r?"cursor-pointer":"","\n            "),children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-text truncate",children:e.quoteNumber}),(0,s.jsx)(a.Ct,{variant:(0,a.Cd)(e.status),size:"sm",children:(0,a.Mx)(e.status)})]}),(0,s.jsx)("p",{className:"text-sm text-text-muted truncate",children:(null===(t=e.customer)||void 0===t?void 0:t.name)||"Unknown Customer"})]}),(0,s.jsxs)("div",{className:"text-right ml-4",children:[(0,s.jsx)("p",{className:"font-semibold text-halloween-green",children:i(e.total)}),(0,s.jsx)("p",{className:"text-xs text-text-muted",children:l(e.createdAt)})]})]},e.id)})})]})}},784:function(e,t,r){r.d(t,{StatsCard:function(){return a}});var s=r(9566);function a(e){let{title:t,value:r,icon:a,trend:n,className:l=""}=e;return(0,s.jsx)("div",{className:"\n        bg-surface rounded-xl p-6 \n        border border-halloween-purple/20\n        hover:border-halloween-purple/40\n        transition-all duration-300\n        ".concat(l,"\n      "),children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-text-muted text-sm font-medium mb-1",children:t}),(0,s.jsx)("p",{className:"text-2xl font-bold text-text",children:r}),n&&(0,s.jsxs)("p",{className:"text-sm mt-2 ".concat(n.isPositive?"text-halloween-green":"text-red-400"),children:[n.isPositive?"↑":"↓"," ",Math.abs(n.value),"%"]})]}),a&&(0,s.jsx)("div",{className:"text-halloween-purple text-2xl",children:a})]})})}r(8590)},846:function(e,t,r){r.d(t,{Badge:function(){return i},formatQuoteStatus:function(){return c},getQuoteStatusVariant:function(){return o}});var s=r(9566);r(8590);let a={default:"bg-surface text-text-muted border-primary/20",primary:"bg-primary/20 text-primary border-primary/30",success:"bg-green-500/20 text-green-400 border-green-500/30",warning:"bg-orange-500/20 text-orange-400 border-orange-500/30",error:"bg-red-500/20 text-red-400 border-red-500/30",pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",accepted:"bg-green-500/20 text-green-400 border-green-500/30",rejected:"bg-red-500/20 text-red-400 border-red-500/30",expired:"bg-gray-500/20 text-gray-400 border-gray-500/30"},n={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"},l={pending:"⏳",accepted:"✓",rejected:"✗",expired:"⌛"},i=e=>{let{variant:t="default",size:r="md",children:i,className:o=""}=e,c=l[t];return(0,s.jsxs)("span",{className:"\n        inline-flex items-center gap-1 font-medium rounded-full border\n        ".concat(a[t],"\n        ").concat(n[r],"\n        ").concat(o,"\n      "),children:[c&&(0,s.jsx)("span",{className:"flex-shrink-0",children:c}),i]})},o=e=>e,c=e=>e.charAt(0).toUpperCase()+e.slice(1)},4347:function(e,t,r){r.d(t,{CobwebCorner:function(){return i},HalloweenDecorations:function(){return l},SpookyBadge:function(){return c},SpookyDivider:function(){return o}});var s=r(9566),a=r(8590);let n=["\uD83C\uDF83","\uD83D\uDC7B","\uD83E\uDD87","\uD83D\uDD77️","\uD83D\uDD78️","\uD83D\uDC80","\uD83C\uDF19","⭐"],l=e=>{let{variant:t="subtle",density:r="low",className:l=""}=e,i={low:4,medium:8,high:12}[r],o=(0,a.useMemo)(()=>Array.from({length:i},(e,r)=>({emoji:n[r%n.length],top:"".concat(80*Math.random()+10,"%"),left:"".concat(90*Math.random()+5,"%"),size:"festive"===t?"text-4xl":"subtle"===t?"text-2xl":"text-xl",delay:"".concat(5*Math.random(),"s"),duration:"".concat(6+4*Math.random(),"s"),opacity:"subtle"===t?.1:"minimal"===t?.05:.2})),[i,t]);return"minimal"===t?null:(0,s.jsx)("div",{className:"fixed inset-0 pointer-events-none overflow-hidden z-0 ".concat(l),"aria-hidden":"true",children:o.map((e,t)=>(0,s.jsx)("div",{className:"absolute ".concat(e.size," select-none"),style:{top:e.top,left:e.left,opacity:e.opacity,animation:"float ".concat(e.duration," ease-in-out infinite"),animationDelay:e.delay},children:e.emoji},t))})},i=e=>{let{position:t="top-right",size:r="md",className:a=""}=e;return(0,s.jsx)("div",{className:"absolute ".concat({"top-left":"top-0 left-0 -rotate-90","top-right":"top-0 right-0","bottom-left":"bottom-0 left-0 rotate-180","bottom-right":"bottom-0 right-0 rotate-90"}[t]," ").concat({sm:"w-16 h-16 text-3xl",md:"w-24 h-24 text-4xl",lg:"w-32 h-32 text-5xl"}[r]," opacity-10 pointer-events-none ").concat(a),"aria-hidden":"true",children:"\uD83D\uDD78️"})},o=e=>{let{variant:t="simple",className:r=""}=e;return"simple"===t?(0,s.jsxs)("div",{className:"flex items-center gap-4 my-6 ".concat(r),children:[(0,s.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-halloween-purple/30 to-transparent"}),(0,s.jsx)("span",{className:"text-halloween-purple/50",children:"\uD83C\uDF83"}),(0,s.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-halloween-purple/30 to-transparent"})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2 my-6 ".concat(r),children:[(0,s.jsx)("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent to-halloween-purple/30"}),(0,s.jsx)("span",{className:"text-halloween-orange/50 text-sm",children:"\uD83D\uDC7B"}),(0,s.jsx)("span",{className:"text-halloween-purple/50 text-lg",children:"\uD83C\uDF83"}),(0,s.jsx)("span",{className:"text-halloween-green/50 text-sm",children:"\uD83E\uDD87"}),(0,s.jsx)("div",{className:"flex-1 h-px bg-gradient-to-l from-transparent to-halloween-purple/30"})]})},c=e=>{let{children:t,variant:r="purple",glow:a=!1,className:n=""}=e;return(0,s.jsx)("span",{className:"\n        inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full border\n        ".concat({purple:"bg-halloween-purple/20 text-halloween-purple border-halloween-purple/30",green:"bg-halloween-green/20 text-halloween-green border-halloween-green/30",orange:"bg-halloween-orange/20 text-halloween-orange border-halloween-orange/30"}[r]," ").concat(a?({purple:"shadow-[0_0_10px_rgba(139,92,246,0.3)]",green:"shadow-[0_0_10px_rgba(34,197,94,0.3)]",orange:"shadow-[0_0_10px_rgba(249,115,22,0.3)]"})[r]:""," ").concat(n,"\n      "),children:t})}},7521:function(e,t,r){r.d(t,{LoadingOverlay:function(){return c},LoadingSpinner:function(){return o}});var s=r(9566),a=r(8590);let n={sm:{spinner:"w-6 h-6",text:"text-sm",icon:"text-lg"},md:{spinner:"w-10 h-10",text:"text-base",icon:"text-2xl"},lg:{spinner:"w-16 h-16",text:"text-lg",icon:"text-4xl"}},l=["Summoning your quote... \uD83C\uDF83","Brewing the numbers... \uD83E\uDDD9‍♀️","Consulting the spirits... \uD83D\uDC7B","Casting calculation spells... ✨","Awakening the data... \uD83E\uDD87","Stirring the cauldron... \uD83D\uDD2E","Gathering moonlight... \uD83C\uDF19","Channeling dark magic... \uD83D\uDD6F️","Waking the undead servers... \uD83E\uDDDF","Reading the crystal ball... \uD83D\uDD2E","Summoning skeleton crew... \uD83D\uDC80","Mixing potions... \uD83E\uDDEA"],i=["\uD83C\uDF83","\uD83D\uDC7B","\uD83E\uDD87","\uD83D\uDD77️","\uD83D\uDC80","\uD83E\uDDD9‍♀️","\uD83D\uDD2E","\uD83C\uDF19"],o=e=>{let{size:t="md",showMessage:r=!0,customMessage:o,variant:c="spooky"}=e,[d,u]=(0,a.useState)(0),[m,x]=(0,a.useState)(0),p=n[t];(0,a.useEffect)(()=>{if(!r||o)return;let e=setInterval(()=>{u(e=>(e+1)%l.length)},2e3);return()=>clearInterval(e)},[r,o]),(0,a.useEffect)(()=>{if("spooky"!==c)return;let e=setInterval(()=>{x(e=>(e+1)%i.length)},500);return()=>clearInterval(e)},[c]);let h=o||l[d];return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",role:"status","aria-live":"polite",children:[(0,s.jsx)("div",{className:"relative ".concat(p.spinner),children:"spooky"===c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center ".concat(p.icon," animate-bounce"),children:i[m]}),(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-halloween-purple/30 animate-ping",style:{animationDuration:"1.5s"}}),(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border-2 border-transparent border-t-halloween-purple border-r-halloween-orange animate-spin",style:{animationDuration:"1s"}})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-primary/20"}),(0,s.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-transparent border-t-primary animate-spin"}),(0,s.jsx)("div",{className:"absolute inset-2 rounded-full bg-primary/10 animate-pulse"})]})}),r&&(0,s.jsx)("p",{className:"".concat(p.text," text-text-muted text-center transition-opacity duration-300"),style:{textShadow:"spooky"===c?"0 0 10px rgba(139, 92, 246, 0.3)":"none"},children:h}),(0,s.jsx)("span",{className:"sr-only",children:"Loading, please wait"})]})},c=e=>{let{isVisible:t,...r}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm",children:(0,s.jsx)(o,{...r,size:"lg"})}):null}},4202:function(e,t,r){r.d(t,{Modal:function(){return l}});var s=r(9566),a=r(8590);let n={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"},l=e=>{let{isOpen:t,onClose:r,title:l,children:i,size:o="md",showCloseButton:c=!0}=e,d=(0,a.useCallback)(e=>{"Escape"===e.key&&r()},[r]);return((0,a.useEffect)(()=>(t&&(document.addEventListener("keydown",d),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",d),document.body.style.overflow="unset"}),[t,d]),t)?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:r,"aria-hidden":"true"}),(0,s.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":l?"modal-title":void 0,className:"\n          relative w-full ".concat(n[o]," mx-4\n          bg-surface border border-primary/20 rounded-xl\n          shadow-2xl shadow-primary/10\n          transform transition-all duration-300\n          animate-in fade-in zoom-in-95\n        "),children:[(l||c)&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-primary/10",children:[l&&(0,s.jsx)("h2",{id:"modal-title",className:"text-lg font-semibold text-text-primary",children:l}),c&&(0,s.jsx)("button",{onClick:r,className:"p-2 rounded-lg hover:bg-primary/10 transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center ml-auto","aria-label":"Close modal",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"p-4",children:i})]})]}):null}},2050:function(e,t,r){r.d(t,{ToastContainer:function(){return o},ToastItem:function(){return d},ToastProvider:function(){return i},useToast:function(){return l}});var s=r(9566),a=r(8590);let n=(0,a.createContext)(void 0),l=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useToast must be used within a ToastProvider");return e},i=e=>{let{children:t}=e,[r,l]=(0,a.useState)([]),i=(0,a.useCallback)(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,s="toast-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9));l(a=>[...a,{id:s,type:e,message:t,duration:r}])},[]),c=(0,a.useCallback)(e=>{l(t=>t.filter(t=>t.id!==e))},[]);return(0,s.jsxs)(n.Provider,{value:{toasts:r,addToast:i,removeToast:c},children:[t,(0,s.jsx)(o,{toasts:r,onRemove:c})]})},o=e=>{let{toasts:t,onRemove:r}=e;return(0,s.jsx)("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 max-w-sm w-full","aria-live":"polite","aria-label":"Notifications",children:t.map(e=>(0,s.jsx)(d,{toast:e,onRemove:r},e.id))})},c={success:{bg:"bg-halloween-green/20 border-halloween-green/50",icon:"text-halloween-green",emoji:"\uD83C\uDF83",glow:"shadow-[0_0_15px_rgba(34,197,94,0.2)]"},error:{bg:"bg-red-500/20 border-red-500/50",icon:"text-red-500",emoji:"\uD83D\uDC7B",glow:"shadow-[0_0_15px_rgba(239,68,68,0.2)]"},warning:{bg:"bg-halloween-orange/20 border-halloween-orange/50",icon:"text-halloween-orange",emoji:"\uD83E\uDD87",glow:"shadow-[0_0_15px_rgba(249,115,22,0.2)]"},info:{bg:"bg-halloween-purple/20 border-halloween-purple/50",icon:"text-halloween-purple",emoji:"\uD83D\uDD2E",glow:"shadow-[0_0_15px_rgba(139,92,246,0.2)]"}},d=e=>{let{toast:t,onRemove:r}=e,[n,l]=(0,a.useState)(!1),i=c[t.type];return(0,a.useEffect)(()=>{if(t.duration&&t.duration>0){let e=setTimeout(()=>{l(!0),setTimeout(()=>r(t.id),300)},t.duration);return()=>clearTimeout(e)}},[t.id,t.duration,r]),(0,s.jsxs)("div",{role:"alert",className:"\n        flex items-start gap-3 p-4 rounded-lg border\n        bg-surface ".concat(i.bg," ").concat(i.glow,"\n        transform transition-all duration-300\n        ").concat(n?"opacity-0 translate-x-full":"opacity-100 translate-x-0","\n      "),children:[(0,s.jsx)("span",{className:"text-xl flex-shrink-0",children:i.emoji}),(0,s.jsx)("p",{className:"flex-1 text-sm text-text-primary",children:t.message}),(0,s.jsx)("button",{onClick:()=>{l(!0),setTimeout(()=>r(t.id),300)},className:"p-1 rounded hover:bg-primary/10 transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center -m-2","aria-label":"Dismiss notification",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}},1979:function(e,t,r){r.d(t,{Cd:function(){return n.getQuoteStatusVariant},Ct:function(){return n.Badge},Mx:function(){return n.formatQuoteStatus},TK:function(){return a.LoadingSpinner},VW:function(){return s.ToastProvider},pm:function(){return s.useToast}}),r(4202);var s=r(2050),a=r(7521),n=r(846);r(4347)},4244:function(e,t,r){r.d(t,{DashboardLayout:function(){return i}});var s=r(9566),a=r(8590),n=r(2860),l=r(9695);let i=e=>{let{children:t,navItems:r,activeNavId:i,headerProps:o,onNavigate:c}=e,[d,u]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(n.Header,{...o,onMenuToggle:()=>u(e=>!e),showMenuButton:!0}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(l.Sidebar,{navItems:r,activeItemId:i,isOpen:d,onClose:()=>u(!1),onNavigate:c}),(0,s.jsx)("main",{className:"flex-1 min-h-[calc(100vh-4rem)]",children:(0,s.jsx)("div",{className:"p-4 md:p-6 lg:p-8",children:t})})]})]})}},2860:function(e,t,r){r.d(t,{Header:function(){return a}});var s=r(9566);r(8590);let a=e=>{let{appName:t="QuickQuote",logoUrl:r,userName:a,onLogout:n,onMenuToggle:l,showMenuButton:i=!0}=e;return(0,s.jsx)("header",{className:"sticky top-0 z-40 w-full bg-surface/95 backdrop-blur border-b border-primary/20",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 md:px-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[i&&(0,s.jsx)("button",{onClick:l,className:"p-2 rounded-lg hover:bg-primary/10 transition-colors md:hidden min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Toggle menu",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[r?(0,s.jsx)("img",{src:r,alt:"".concat(t," logo"),className:"w-8 h-8 rounded-lg object-cover"}):(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-primary/20 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-primary font-bold text-sm",children:t.charAt(0)})}),(0,s.jsx)("h1",{className:"text-xl font-heading text-text-primary hidden sm:block",children:t})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[a&&(0,s.jsx)("span",{className:"text-sm text-text-muted hidden sm:block",children:a}),n&&(0,s.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-3 py-2 text-sm text-text-muted hover:text-text-primary hover:bg-primary/10 rounded-lg transition-colors min-h-[44px]",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})}},9695:function(e,t,r){r.d(t,{Sidebar:function(){return a}});var s=r(9566);r(8590);let a=e=>{let{navItems:t,activeItemId:r,isOpen:a=!0,onClose:n,onNavigate:l}=e,i=e=>{null==l||l(e),null==n||n()};return(0,s.jsxs)(s.Fragment,{children:[a&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:n,"aria-hidden":"true"}),(0,s.jsx)("aside",{className:"\n          fixed md:sticky top-0 left-0 z-50 md:z-30\n          h-screen w-64 bg-surface border-r border-primary/20\n          transform transition-transform duration-300 ease-in-out\n          ".concat(a?"translate-x-0":"-translate-x-full md:translate-x-0","\n          md:translate-x-0\n        "),children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)("div",{className:"flex items-center justify-end p-4 md:hidden",children:(0,s.jsx)("button",{onClick:n,className:"p-2 rounded-lg hover:bg-primary/10 transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Close menu",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})}),(0,s.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:t.map(e=>{let t=e.id===r;return(0,s.jsxs)("button",{onClick:()=>i(e.href),className:"\n                    w-full flex items-center gap-3 px-4 py-3 rounded-lg\n                    text-left transition-all duration-200 min-h-[44px]\n                    ".concat(t?"bg-primary/20 text-primary border-l-2 border-primary":"text-text-muted hover:bg-primary/10 hover:text-text-primary","\n                  "),"aria-current":t?"page":void 0,children:[e.icon&&(0,s.jsx)("span",{className:"w-5 h-5 flex-shrink-0",children:e.icon}),(0,s.jsx)("span",{className:"font-medium",children:e.label})]},e.id)})}),(0,s.jsx)("div",{className:"p-4 border-t border-primary/10",children:(0,s.jsx)("p",{className:"text-xs text-text-muted text-center",children:"\uD83C\uDF83 SpookyQuote v1.0"})})]})})]})}},4014:function(e,t,r){r.d(t,{OnboardingWizard:function(){return p}});var s=r(9566),a=r(8590),n=r(7046),l=r(822),i=r(1655),o=r(1140),c=r(5996),d=r(7521),u=r(4742),m=r(3443);let x=[{id:1,title:"Business Details",icon:"\uD83C\uDFE2"},{id:2,title:"Logo Upload",icon:"\uD83D\uDDBC️"},{id:3,title:"Default Settings",icon:"⚙️"}],p=e=>{let{onComplete:t,isLoading:r=!1,error:p}=e,[h,g]=(0,a.useState)(1),[f,b]=(0,a.useState)({name:"",phone:"",email:"",address:"",defaultTerms:"",defaultValidityDays:7}),[y,j]=(0,a.useState)(null),[v,N]=(0,a.useState)(null),[w,C]=(0,a.useState)({}),D=(0,a.useCallback)((e,t)=>{b(r=>({...r,[e]:t})),w[e]&&C(t=>({...t,[e]:void 0}))},[w]),k=(0,a.useCallback)(()=>{let e={};return f.name.trim()||(e.name="Business name is required"),f.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)&&(e.email="Invalid email format"),C(e),0===Object.keys(e).length},[f]),S=(0,a.useCallback)(()=>{let e={};return(f.defaultValidityDays<1||f.defaultValidityDays>365)&&(e.defaultValidityDays="Validity must be between 1 and 365 days"),C(e),0===Object.keys(e).length},[f]),A=(0,a.useCallback)(()=>{(1!==h||k())&&(3!==h||S())&&h<3&&g(e=>e+1)},[h,k,S]),B=(0,a.useCallback)(()=>{h>1&&g(e=>e-1)},[h]),L=(0,a.useCallback)(e=>{j(e);let t=new FileReader;t.onloadend=()=>{N(t.result)},t.readAsDataURL(e)},[]),I=(0,a.useCallback)(async()=>{if(S())try{let e=u.l6.parse(f);await t(e,y||void 0)}catch(e){if(e instanceof m.jm){let t={};e.errors.forEach(e=>{t[e.path[0]]=e.message}),C(t)}}},[f,y,t,S]);return r?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,s.jsx)(d.LoadingSpinner,{size:"lg",customMessage:"Setting up your business... \uD83C\uDF83"})}):(0,s.jsxs)(c.Card,{variant:"elevated",padding:"lg",className:"max-w-xl mx-auto",children:[(0,s.jsx)("div",{className:"flex items-center justify-center mb-8",children:x.map((e,t)=>(0,s.jsxs)(a.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"\n                w-10 h-10 rounded-full flex items-center justify-center text-lg\n                transition-all duration-300\n                ".concat(h>=e.id?"bg-primary text-white":"bg-surface border-2 border-primary/30 text-text-muted","\n              "),children:e.icon}),(0,s.jsx)("span",{className:"\n              text-xs mt-1 hidden sm:block\n              ".concat(h>=e.id?"text-primary":"text-text-muted","\n            "),children:e.title})]}),t<x.length-1&&(0,s.jsx)("div",{className:"\n                w-12 sm:w-20 h-1 mx-2\n                ".concat(h>e.id?"bg-primary":"bg-primary/20","\n              ")})]},e.id))}),p&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-500 text-sm",children:p}),1===h&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-text-primary mb-4",children:"Tell us about your business \uD83C\uDFE2"}),(0,s.jsx)(l.Input,{label:"Business Name *",placeholder:"Enter your business name",value:f.name,onChange:e=>D("name",e.target.value),error:w.name}),(0,s.jsx)(l.Input,{label:"Phone Number",placeholder:"Enter your phone number",type:"tel",value:f.phone||"",onChange:e=>D("phone",e.target.value),error:w.phone}),(0,s.jsx)(l.Input,{label:"Email Address",placeholder:"Enter your email",type:"email",value:f.email||"",onChange:e=>D("email",e.target.value),error:w.email}),(0,s.jsx)(i.TextArea,{label:"Business Address",placeholder:"Enter your business address",value:f.address||"",onChange:e=>D("address",e.target.value),rows:3})]}),2===h&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-text-primary mb-4",children:"Add your logo \uD83D\uDDBC️"}),(0,s.jsx)("p",{className:"text-text-muted text-sm mb-4",children:"Your logo will appear on all your quotes. You can skip this step and add it later."}),(0,s.jsx)(o.FileUpload,{label:"Business Logo",accept:"image/png,image/jpeg,image/jpg",maxSize:2097152,onFileSelect:L,preview:v,hint:"PNG or JPG, max 2MB"})]}),3===h&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-text-primary mb-4",children:"Default Quote Settings ⚙️"}),(0,s.jsx)("p",{className:"text-text-muted text-sm mb-4",children:"Set your default terms and validity period for quotes. You can change these for individual quotes later."}),(0,s.jsx)(i.TextArea,{label:"Default Terms & Conditions",placeholder:"Enter your standard terms and conditions...",value:f.defaultTerms||"",onChange:e=>D("defaultTerms",e.target.value),rows:4,hint:"These will be pre-filled on new quotes"}),(0,s.jsx)(l.Input,{label:"Default Quote Validity (days)",type:"number",min:1,max:365,value:f.defaultValidityDays,onChange:e=>D("defaultValidityDays",parseInt(e.target.value)||7),error:w.defaultValidityDays,hint:"How long quotes are valid by default"})]}),(0,s.jsxs)("div",{className:"flex justify-between mt-8 pt-4 border-t border-primary/10",children:[(0,s.jsx)(n.Button,{variant:"ghost",onClick:B,disabled:1===h,children:"← Back"}),h<3?(0,s.jsx)(n.Button,{onClick:A,children:"Next →"}):(0,s.jsx)(n.Button,{onClick:I,isLoading:r,children:"Complete Setup \uD83C\uDF89"})]})]})}},8304:function(e,t,r){r.d(t,{CustomerSelector:function(){return o}});var s=r(9566),a=r(8590),n=r(822),l=r(7046),i=r(6822);let o=e=>{let{customers:t,selectedCustomer:r,onSelect:o,onCreateCustomer:c,isLoading:d=!1,error:u}=e,[m,x]=(0,a.useState)(""),[p,h]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!1),b=(0,a.useMemo)(()=>{if(!m.trim())return t;let e=m.toLowerCase().trim();return t.filter(t=>t.name.toLowerCase().includes(e)||t.phone.includes(e)||t.email&&t.email.toLowerCase().includes(e))},[t,m]),y=async e=>{f(!0);try{let t=await c(e);t&&(o(t),h(!1),x(""))}finally{f(!1)}};return r?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary",children:"Selected Customer"}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-surface border border-primary/30 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-primary text-lg",children:"\uD83D\uDC64"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-text-primary",children:r.name}),(0,s.jsx)("p",{className:"text-sm text-text-secondary",children:r.phone}),r.email&&(0,s.jsx)("p",{className:"text-xs text-text-muted",children:r.email})]})]}),(0,s.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>o(null),children:"Change"})]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-text-primary",children:["Select Customer ",(0,s.jsx)("span",{className:"text-accent",children:"*"})]}),!p&&(0,s.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>h(!0),children:"+ Add New"})]}),u&&(0,s.jsx)("div",{className:"p-2 bg-red-500/10 border border-red-500/30 rounded text-red-400 text-sm",children:u}),p?(0,s.jsx)(i.InlineCustomerForm,{onSubmit:y,onCancel:()=>h(!1),isLoading:g}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Input,{placeholder:"Search by name, phone, or email...",value:m,onChange:e=>x(e.target.value),className:"w-full"}),(0,s.jsx)("div",{className:"max-h-60 overflow-y-auto border border-primary/20 rounded-lg divide-y divide-primary/10",children:d?(0,s.jsx)("div",{className:"p-4 text-center text-text-secondary",children:(0,s.jsx)("span",{className:"animate-pulse",children:"\uD83D\uDD2E Summoning customers..."})}):0===b.length?(0,s.jsx)("div",{className:"p-4 text-center text-text-secondary",children:m?(0,s.jsxs)("span",{children:['No customers found matching "',m,'"']}):(0,s.jsx)("span",{children:"No customers yet. Add one to get started!"})}):b.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>o(e),className:"w-full p-3 text-left hover:bg-primary/10 transition-colors flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("span",{className:"text-sm",children:"\uD83D\uDC64"})}),(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-text-primary truncate",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-text-secondary truncate",children:e.phone})]})]},e.id))})]})]})}},3347:function(e,t,r){r.d(t,{DiscountInput:function(){return l}});var s=r(9566);r(8590);var a=r(822),n=r(7046);let l=e=>{let{discount:t,subtotal:r,onChange:l}=e,i=!t||t.value<=0?0:"percentage"===t.type?r*t.value/100:Math.min(t.value,r),o=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),c=e=>{t?l({...t,type:e}):l({type:e,value:0})},d=(null==t?void 0:t.type)||"percentage",u=(null==t?void 0:t.value)||0;return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary",children:"Discount (optional)"}),t&&t.value>0&&(0,s.jsx)(n.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{l(null)},className:"text-xs text-text-muted hover:text-text-secondary",children:"Clear"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex rounded-lg border border-primary/20 overflow-hidden",children:[(0,s.jsx)("button",{type:"button",onClick:()=>c("percentage"),className:"\n              px-3 py-2 text-sm font-medium transition-colors\n              ".concat("percentage"===d?"bg-primary text-white":"bg-surface text-text-secondary hover:bg-surface/80","\n            "),children:"%"}),(0,s.jsx)("button",{type:"button",onClick:()=>c("fixed"),className:"\n              px-3 py-2 text-sm font-medium transition-colors\n              ".concat("fixed"===d?"bg-primary text-white":"bg-surface text-text-secondary hover:bg-surface/80","\n            "),children:"$"})]}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(a.Input,{type:"number",min:"0",max:"percentage"===d?100:void 0,step:"percentage"===d?1:.01,value:u||"",onChange:e=>{let r=parseFloat(e.target.value)||0;if((null==t?void 0:t.type)==="percentage"&&r>100){l({type:"percentage",value:100});return}if(r<0){l({type:(null==t?void 0:t.type)||"percentage",value:0});return}l({type:(null==t?void 0:t.type)||"percentage",value:r})},placeholder:"percentage"===d?"Enter %":"Enter amount",className:"w-full"})})]}),i>0&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-accent/10 border border-accent/20 rounded-lg",children:[(0,s.jsx)("span",{className:"text-sm text-text-secondary",children:"percentage"===d?"".concat(u,"% off"):"".concat(o(u)," off")}),(0,s.jsxs)("span",{className:"text-sm font-medium text-accent",children:["-",o(i)]})]})]})}},5200:function(e,t,r){r.d(t,{QuoteCreationForm:function(){return m}});var s=r(9566),a=r(8590),n=r(8304),l=r(3770),i=r(4592),o=r(3347),c=r(7046),d=r(1655),u=r(822);let m=e=>{let{business:t,customers:r,services:m,customersLoading:x=!1,servicesLoading:p=!1,onCreateCustomer:h,onSubmit:g,isSubmitting:f=!1}=e,[b,y]=(0,a.useState)(null),[j,v]=(0,a.useState)(new Set),[N,w]=(0,a.useState)([]),[C,D]=(0,a.useState)(null),[k,S]=(0,a.useState)(""),[A,B]=(0,a.useState)(t.defaultTerms||""),[L,I]=(0,a.useState)(t.defaultValidityDays||7),[_,T]=(0,a.useState)(null),F=(0,a.useMemo)(()=>(function(e){var t;let r=e.items.map(e=>({...e,lineTotal:e.quantity*e.unitPrice})),s=e.items.reduce((e,t)=>e+t.quantity*t.unitPrice,0),a=e.discount?"percentage"===(t=e.discount).type?s*t.value/100:t.value:0;return{lineItems:r,subtotal:s,discountAmount:a,total:Math.max(0,s-a)}})({items:N.map(e=>({serviceId:e.serviceId,serviceName:e.serviceName,quantity:e.quantity,unitPrice:e.unitPrice})),discount:C&&C.value>0?{type:C.type,value:C.value}:void 0}),[N,C]),E=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),z=(0,a.useCallback)(e=>{v(t=>{let r=new Set(t);if(r.has(e))r.delete(e),w(t=>t.filter(t=>t.serviceId!==e));else{r.add(e);let t=m.find(t=>t.id===e);t&&w(e=>[...e,{serviceId:t.id,serviceName:t.name,quantity:1,unitPrice:t.price}])}return r})},[m]),P=(0,a.useCallback)((e,t)=>{w(r=>r.map(r=>r.serviceId===e?{...r,quantity:t}:r))},[]),q=(0,a.useCallback)(e=>{v(t=>{let r=new Set(t);return r.delete(e),r}),w(t=>t.filter(t=>t.serviceId!==e))},[]),M=async e=>{T(null);let t=await h(e);return t&&y(t),t},U=(0,a.useMemo)(()=>{let e=new Date;return e.setDate(e.getDate()+L),e},[L]),Q=async e=>{if(e.preventDefault(),!b){T("Please select a customer");return}if(0===N.length)return;let t={customerId:b.id,items:N.map(e=>({serviceId:e.serviceId,serviceName:e.serviceName,quantity:e.quantity,unitPrice:e.unitPrice,totalPrice:e.quantity*e.unitPrice})),subtotal:F.subtotal,discountType:null==C?void 0:C.type,discountValue:null==C?void 0:C.value,total:F.total,notes:k||void 0,terms:A||void 0,validUntil:U};await g(t)},V=b&&N.length>0&&!f;return(0,s.jsxs)("form",{onSubmit:Q,className:"space-y-8",children:[(0,s.jsxs)("section",{className:"bg-surface rounded-xl p-6 border border-primary/20",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-accent",children:"1."})," Customer"]}),(0,s.jsx)(n.CustomerSelector,{customers:r,selectedCustomer:b,onSelect:y,onCreateCustomer:M,isLoading:x,error:_})]}),(0,s.jsxs)("section",{className:"bg-surface rounded-xl p-6 border border-primary/20",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-accent",children:"2."})," Services"]}),(0,s.jsx)(l.ServiceSelector,{services:m,selectedServiceIds:j,onToggleService:z,isLoading:p})]}),N.length>0&&(0,s.jsxs)("section",{className:"bg-surface rounded-xl p-6 border border-primary/20",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-accent",children:"3."})," Quote Items"]}),(0,s.jsx)(i.QuoteItemsList,{items:N,onQuantityChange:P,onRemove:q})]}),(0,s.jsxs)("section",{className:"bg-surface rounded-xl p-6 border border-primary/20",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-accent",children:"4."})," Details"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(o.DiscountInput,{discount:C,subtotal:F.subtotal,onChange:D}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Valid for (days)"}),(0,s.jsx)(u.Input,{type:"number",min:"1",max:"365",value:L,onChange:e=>I(parseInt(e.target.value)||7)}),(0,s.jsxs)("p",{className:"text-xs text-text-muted mt-1",children:["Expires: ",U.toLocaleDateString()]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(d.TextArea,{label:"Notes (optional)",value:k,onChange:e=>S(e.target.value),placeholder:"Add any notes for the customer...",rows:3}),(0,s.jsx)(d.TextArea,{label:"Terms & Conditions",value:A,onChange:e=>B(e.target.value),placeholder:"Payment terms, delivery conditions, etc.",rows:3})]})]})]}),(0,s.jsxs)("section",{className:"bg-surface rounded-xl p-6 border border-accent/30",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-accent",children:"\uD83D\uDC80"})," Quote Summary"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between text-text-secondary",children:[(0,s.jsxs)("span",{children:["Subtotal (",N.length," items)"]}),(0,s.jsx)("span",{children:E(F.subtotal)})]}),F.discountAmount>0&&(0,s.jsxs)("div",{className:"flex justify-between text-accent",children:[(0,s.jsxs)("span",{children:["Discount",(null==C?void 0:C.type)==="percentage"&&" (".concat(C.value,"%)")]}),(0,s.jsxs)("span",{children:["-",E(F.discountAmount)]})]}),(0,s.jsx)("div",{className:"border-t border-primary/20 pt-3",children:(0,s.jsxs)("div",{className:"flex justify-between text-xl font-bold",children:[(0,s.jsx)("span",{className:"text-text-primary",children:"Total"}),(0,s.jsx)("span",{className:"text-accent",children:E(F.total)})]})})]}),(0,s.jsx)("div",{className:"mt-6 flex gap-4",children:(0,s.jsx)(c.Button,{type:"submit",variant:"primary",size:"lg",disabled:!V,isLoading:f,className:"flex-1",children:"\uD83C\uDF83 Generate Quote"})}),!b&&N.length>0&&(0,s.jsx)("p",{className:"text-sm text-red-400 mt-2 text-center",children:"Please select a customer to generate the quote"}),b&&0===N.length&&(0,s.jsx)("p",{className:"text-sm text-text-muted mt-2 text-center",children:"Select at least one service to generate the quote"})]})]})}},4592:function(e,t,r){r.d(t,{QuoteItemRow:function(){return n},QuoteItemsList:function(){return l}});var s=r(9566);r(8590);var a=r(7046);let n=e=>{let{item:t,onQuantityChange:r,onRemove:n}=e,l=t.quantity*t.unitPrice,i=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return(0,s.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-surface/30 rounded-lg border border-primary/10",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"font-medium text-text-primary truncate",children:t.serviceName}),(0,s.jsxs)("p",{className:"text-sm text-text-secondary",children:[i(t.unitPrice)," each"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(a.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{t.quantity>1&&r(t.serviceId,t.quantity-1)},disabled:t.quantity<=1,className:"w-8 h-8 p-0",children:"−"}),(0,s.jsx)("input",{type:"number",min:"1",value:t.quantity,onChange:e=>{let s=parseInt(e.target.value,10);!isNaN(s)&&s>=1&&r(t.serviceId,s)},className:"w-12 h-8 text-center bg-background border border-primary/20 rounded text-text-primary text-sm focus:outline-none focus:border-primary"}),(0,s.jsx)(a.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{r(t.serviceId,t.quantity+1)},className:"w-8 h-8 p-0",children:"+"})]}),(0,s.jsx)("div",{className:"w-24 text-right",children:(0,s.jsx)("p",{className:"font-semibold text-accent",children:i(l)})}),(0,s.jsx)(a.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>n(t.serviceId),className:"text-red-400 hover:text-red-300 hover:bg-red-500/10",children:"✕"})]})},l=e=>{let{items:t,onQuantityChange:r,onRemove:a}=e;return 0===t.length?(0,s.jsxs)("div",{className:"p-6 text-center text-text-secondary border border-dashed border-primary/20 rounded-lg",children:[(0,s.jsx)("p",{children:"No services selected yet."}),(0,s.jsx)("p",{className:"text-sm mt-1",children:"Select services above to add them to the quote."})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-text-muted uppercase tracking-wider px-3",children:[(0,s.jsx)("span",{children:"Service"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("span",{className:"w-24 text-center",children:"Qty"}),(0,s.jsx)("span",{className:"w-24 text-right",children:"Total"}),(0,s.jsx)("span",{className:"w-8"})]})]}),t.map(e=>(0,s.jsx)(n,{item:e,onQuantityChange:r,onRemove:a},e.serviceId))]})}},6119:function(e,t,r){r.d(t,{QuotePDF:function(){return l},useQuotePDF:function(){return n}});var s=r(9566),a=r(8590);let n=(e,t)=>{let s=(0,a.useRef)(null),[n,l]=(0,a.useState)(!1),i=(0,a.useCallback)(async()=>{if(s.current&&!n){l(!0);try{let a=(await Promise.all([r.e(34),r.e(943),r.e(892),r.e(979),r.e(509)]).then(r.t.bind(r,1901,23))).default,n=s.current,l="".concat(e.quoteNumber,"-").concat(t.name.replace(/\s+/g,"-"),".pdf");await a().set({margin:0,filename:l,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,letterRendering:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(n).save()}catch(e){throw console.error("Error generating PDF:",e),e}finally{l(!1)}}},[e.quoteNumber,t.name,n]);return{containerRef:s,downloadPDF:i,isGenerating:n}},l=e=>{let{quote:t,business:r,customer:a,items:n}=e,l=a||t.customer,i=n||t.items||[],o=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),c=e=>e?("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",d=t.discountType&&t.discountValue&&t.discountValue>0,u=d?"percentage"===t.discountType?t.subtotal*t.discountValue/100:t.discountValue:0;return(0,s.jsxs)("div",{style:{width:"210mm",minHeight:"297mm",backgroundColor:"white",color:"#1f2937",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"12px",lineHeight:"1.5"},children:[(0,s.jsx)("div",{style:{background:"linear-gradient(to right, #581c87, #7c3aed)",padding:"24px",color:"white"},children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[r.logoUrl?(0,s.jsx)("img",{src:r.logoUrl,alt:"".concat(r.name," logo"),style:{width:"64px",height:"64px",objectFit:"contain",backgroundColor:"white",borderRadius:"8px",padding:"4px"}}):(0,s.jsx)("div",{style:{width:"64px",height:"64px",backgroundColor:"rgba(255,255,255,0.2)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},children:"\uD83C\uDF83"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{style:{fontSize:"24px",fontWeight:"bold",margin:0},children:r.name}),r.email&&(0,s.jsx)("p",{style:{color:"#e9d5ff",fontSize:"12px",margin:"4px 0 0 0"},children:r.email}),r.phone&&(0,s.jsx)("p",{style:{color:"#e9d5ff",fontSize:"12px",margin:"2px 0 0 0"},children:r.phone})]})]}),(0,s.jsx)("div",{style:{textAlign:"right"},children:(0,s.jsx)("span",{style:{display:"inline-block",padding:"4px 12px",backgroundColor:"rgba(255,255,255,0.2)",borderRadius:"9999px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:t.status})})]})}),(0,s.jsx)("div",{style:{padding:"24px",borderBottom:"1px solid #e5e7eb"},children:(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{style:{fontSize:"16px",fontWeight:"600",color:"#111827",marginBottom:"12px"},children:"Quote Details"}),(0,s.jsxs)("div",{style:{fontSize:"12px"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,s.jsx)("span",{style:{color:"#6b7280"},children:"Quote Number:"}),(0,s.jsx)("span",{style:{fontWeight:"500"},children:t.quoteNumber})]}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[(0,s.jsx)("span",{style:{color:"#6b7280"},children:"Date:"}),(0,s.jsx)("span",{style:{fontWeight:"500"},children:c(t.createdAt)})]}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,s.jsx)("span",{style:{color:"#6b7280"},children:"Valid Until:"}),(0,s.jsx)("span",{style:{fontWeight:"500",color:"#ea580c"},children:c(t.validUntil)})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{style:{fontSize:"16px",fontWeight:"600",color:"#111827",marginBottom:"12px"},children:"Bill To"}),l?(0,s.jsxs)("div",{style:{fontSize:"12px"},children:[(0,s.jsx)("p",{style:{fontWeight:"500",color:"#111827",margin:"0 0 4px 0"},children:l.name}),(0,s.jsx)("p",{style:{color:"#6b7280",margin:"0 0 2px 0"},children:l.phone}),l.email&&(0,s.jsx)("p",{style:{color:"#6b7280",margin:"0 0 2px 0"},children:l.email}),l.address&&(0,s.jsx)("p",{style:{color:"#6b7280",margin:0},children:l.address})]}):(0,s.jsx)("p",{style:{color:"#9ca3af",fontSize:"12px"},children:"Customer details not available"})]})]})}),(0,s.jsxs)("div",{style:{padding:"24px"},children:[(0,s.jsx)("h2",{style:{fontSize:"16px",fontWeight:"600",color:"#111827",marginBottom:"16px"},children:"Services"}),(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{style:{borderBottom:"2px solid #e5e7eb"},children:[(0,s.jsx)("th",{style:{textAlign:"left",padding:"12px 8px",fontWeight:"600",color:"#374151"},children:"Service"}),(0,s.jsx)("th",{style:{textAlign:"center",padding:"12px 8px",fontWeight:"600",color:"#374151"},children:"Qty"}),(0,s.jsx)("th",{style:{textAlign:"right",padding:"12px 8px",fontWeight:"600",color:"#374151"},children:"Unit Price"}),(0,s.jsx)("th",{style:{textAlign:"right",padding:"12px 8px",fontWeight:"600",color:"#374151"},children:"Total"})]})}),(0,s.jsx)("tbody",{children:i.map((e,t)=>(0,s.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6"},children:[(0,s.jsx)("td",{style:{padding:"12px 8px",color:"#111827"},children:e.serviceName}),(0,s.jsx)("td",{style:{padding:"12px 8px",textAlign:"center",color:"#6b7280"},children:e.quantity}),(0,s.jsx)("td",{style:{padding:"12px 8px",textAlign:"right",color:"#6b7280"},children:o(e.unitPrice)}),(0,s.jsx)("td",{style:{padding:"12px 8px",textAlign:"right",fontWeight:"500",color:"#111827"},children:o(e.totalPrice)})]},e.id||t))})]}),(0,s.jsx)("div",{style:{marginTop:"24px",borderTop:"1px solid #e5e7eb",paddingTop:"16px"},children:(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:(0,s.jsxs)("div",{style:{width:"200px"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",fontSize:"12px"},children:[(0,s.jsx)("span",{style:{color:"#6b7280"},children:"Subtotal:"}),(0,s.jsx)("span",{style:{fontWeight:"500"},children:o(t.subtotal)})]}),d&&(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px",fontSize:"12px",color:"#16a34a"},children:[(0,s.jsxs)("span",{children:["Discount","percentage"===t.discountType&&" (".concat(t.discountValue,"%)"),":"]}),(0,s.jsxs)("span",{children:["-",o(u)]})]}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"16px",fontWeight:"bold",borderTop:"2px solid #d1d5db",paddingTop:"8px",marginTop:"8px"},children:[(0,s.jsx)("span",{style:{color:"#111827"},children:"Total:"}),(0,s.jsx)("span",{style:{color:"#7c3aed"},children:o(t.total)})]})]})})})]}),(t.terms||t.notes)&&(0,s.jsxs)("div",{style:{padding:"0 24px 24px 24px"},children:[t.notes&&(0,s.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,s.jsx)("h3",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Notes"}),(0,s.jsx)("p",{style:{fontSize:"12px",color:"#6b7280",whiteSpace:"pre-wrap",backgroundColor:"#f9fafb",padding:"12px",borderRadius:"8px",margin:0},children:t.notes})]}),t.terms&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{style:{fontSize:"12px",fontWeight:"600",color:"#374151",marginBottom:"8px"},children:"Terms & Conditions"}),(0,s.jsx)("p",{style:{fontSize:"12px",color:"#6b7280",whiteSpace:"pre-wrap",backgroundColor:"#f9fafb",padding:"12px",borderRadius:"8px",margin:0},children:t.terms})]})]}),(0,s.jsxs)("div",{style:{backgroundColor:"#581c87",color:"#e9d5ff",textAlign:"center",padding:"12px",fontSize:"10px",marginTop:"auto"},children:[(0,s.jsx)("p",{style:{margin:0},children:"Thank you for your business! \uD83C\uDF83"}),r.address&&(0,s.jsx)("p",{style:{margin:"4px 0 0 0"},children:r.address})]})]})}},7200:function(e,t,r){r.d(t,{QuotePreview:function(){return n}});var s=r(9566);r(8590);var a=r(846);let n=e=>{let{quote:t,business:r,customer:n,items:l,showActions:i=!0,onDownloadPDF:o,onShareWhatsApp:c,isDownloading:d=!1}=e,u=n||t.customer,m=l||t.items||[],x=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),p=e=>e?("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",h=t.subtotal-t.total+(t.discountValue||0),g=t.discountType&&t.discountValue&&t.discountValue>0;return(0,s.jsxs)("div",{className:"bg-white text-gray-900 rounded-xl shadow-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-purple-900 to-purple-700 p-6 text-white",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[r.logoUrl?(0,s.jsx)("img",{src:r.logoUrl,alt:"".concat(r.name," logo"),className:"w-16 h-16 object-contain bg-white rounded-lg p-1"}):(0,s.jsx)("div",{className:"w-16 h-16 bg-white/20 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83C\uDF83"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:r.name}),r.email&&(0,s.jsx)("p",{className:"text-purple-200 text-sm",children:r.email}),r.phone&&(0,s.jsx)("p",{className:"text-purple-200 text-sm",children:r.phone})]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsx)(a.Badge,{variant:(0,a.getQuoteStatusVariant)(t.status),size:"md",children:(0,a.formatQuoteStatus)(t.status)})})]})}),(0,s.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Quote Details"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Quote Number:"}),(0,s.jsx)("span",{className:"font-medium",children:t.quoteNumber})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Date:"}),(0,s.jsx)("span",{className:"font-medium",children:p(t.createdAt)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Valid Until:"}),(0,s.jsx)("span",{className:"font-medium text-orange-600",children:p(t.validUntil)})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Bill To"}),u?(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:u.name}),(0,s.jsx)("p",{className:"text-gray-600",children:u.phone}),u.email&&(0,s.jsx)("p",{className:"text-gray-600",children:u.email}),u.address&&(0,s.jsx)("p",{className:"text-gray-600",children:u.address})]}):(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Customer details not available"})]})]})}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Services"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b-2 border-gray-200",children:[(0,s.jsx)("th",{className:"text-left py-3 px-2 font-semibold text-gray-700",children:"Service"}),(0,s.jsx)("th",{className:"text-center py-3 px-2 font-semibold text-gray-700",children:"Qty"}),(0,s.jsx)("th",{className:"text-right py-3 px-2 font-semibold text-gray-700",children:"Unit Price"}),(0,s.jsx)("th",{className:"text-right py-3 px-2 font-semibold text-gray-700",children:"Total"})]})}),(0,s.jsxs)("tbody",{children:[m.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"py-3 px-2 text-gray-900",children:e.serviceName}),(0,s.jsx)("td",{className:"py-3 px-2 text-center text-gray-600",children:e.quantity}),(0,s.jsx)("td",{className:"py-3 px-2 text-right text-gray-600",children:x(e.unitPrice)}),(0,s.jsx)("td",{className:"py-3 px-2 text-right font-medium text-gray-900",children:x(e.totalPrice)})]},e.id||t)),0===m.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:4,className:"py-6 text-center text-gray-500",children:"No items in this quote"})})]})]})}),(0,s.jsx)("div",{className:"mt-6 border-t border-gray-200 pt-4",children:(0,s.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between w-full max-w-xs text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,s.jsx)("span",{className:"font-medium",children:x(t.subtotal)})]}),g&&(0,s.jsxs)("div",{className:"flex justify-between w-full max-w-xs text-sm text-green-600",children:[(0,s.jsxs)("span",{children:["Discount","percentage"===t.discountType&&" (".concat(t.discountValue,"%)"),":"]}),(0,s.jsxs)("span",{children:["-",x(h)]})]}),(0,s.jsxs)("div",{className:"flex justify-between w-full max-w-xs text-lg font-bold border-t border-gray-300 pt-2 mt-2",children:[(0,s.jsx)("span",{className:"text-gray-900",children:"Total:"}),(0,s.jsx)("span",{className:"text-purple-700",children:x(t.total)})]})]})})]}),(t.terms||t.notes)&&(0,s.jsxs)("div",{className:"px-6 pb-6 space-y-4",children:[t.notes&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Notes"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 whitespace-pre-wrap bg-gray-50 p-3 rounded-lg",children:t.notes})]}),t.terms&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Terms & Conditions"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 whitespace-pre-wrap bg-gray-50 p-3 rounded-lg",children:t.terms})]})]}),i&&(o||c)&&(0,s.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 justify-end",children:[o&&(0,s.jsx)("button",{onClick:o,disabled:d,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"⏳"}),"Generating..."]}):(0,s.jsx)(s.Fragment,{children:"\uD83D\uDCC4 Download PDF"})}),c&&(0,s.jsx)("button",{onClick:c,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"\uD83D\uDCAC Share on WhatsApp"})]})}),(0,s.jsxs)("div",{className:"bg-purple-900 text-purple-200 text-center py-3 text-xs",children:[(0,s.jsx)("p",{children:"Thank you for your business! \uD83C\uDF83"}),r.address&&(0,s.jsx)("p",{className:"mt-1",children:r.address})]})]})}},4251:function(e,t,r){r.d(t,{QuoteShare:function(){return c}});var s=r(9566),a=r(8590);let n=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),l=e=>e?("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";async function i(e){try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),!0;{let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();let r=document.execCommand("copy");return document.body.removeChild(t),r}}catch(e){return!1}}var o=r(2050);let c=e=>{let{quote:t,business:r,customer:c,baseUrl:d=window.location.origin,className:u=""}=e,{addToast:m}=(0,o.useToast)(),[x,p]=(0,a.useState)(!1),h=function(e,t){let r=t.replace(/\/$/,"");return"".concat(r,"/quotes/").concat(e)}(t.id,d),g=(0,a.useCallback)(()=>{let e=c||t.customer,s=function(e,t){let r=encodeURIComponent(e);if(t){let e=t.replace(/[\s\-\(\)]/g,"");return"https://wa.me/".concat(e,"?text=").concat(r)}return"https://wa.me/?text=".concat(r)}(function(e){let{quote:t,business:r,customer:s,quoteLink:a}=e,i=s||t.customer,o=(null==i?void 0:i.name)||"Valued Customer";return"\uD83C\uDF83 *Quote from ".concat(r.name,"* \uD83C\uDF83\n\nHi ").concat(o,"! \uD83D\uDC4B\n\nHere's your quote details:\n\n\uD83D\uDCCB *Quote Number:* ").concat(t.quoteNumber,"\n\uD83D\uDCC5 *Date:* ").concat(l(t.createdAt),"\n⏰ *Valid Until:* ").concat(l(t.validUntil),"\n\n\uD83D\uDCB0 *Total Amount:* ").concat(n(t.total),"\n\n\uD83D\uDD17 *View Full Quote:*\n").concat(a,"\n\nThank you for your interest! Feel free to reach out if you have any questions. \uD83D\uDE4F\n\n_Sent via QuickQuote_ \uD83D\uDC7B")}({quote:t,business:r,customer:e,quoteLink:h}),null==e?void 0:e.phone);window.open(s,"_blank","noopener,noreferrer"),m("success","\uD83C\uDF83 Opening WhatsApp... Spooky quote on its way!")},[t,r,c,h,m]),f=(0,a.useCallback)(async()=>{p(!0);try{await i(h)?m("success","\uD83D\uDC7B Link copied to clipboard!"):m("error","\uD83D\uDE31 Failed to copy link. Please try again.")}catch(e){m("error","\uD83D\uDE31 Failed to copy link. Please try again.")}finally{p(!1)}},[h,m]);return(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 ".concat(u),children:[(0,s.jsxs)("button",{onClick:g,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2","aria-label":"Share quote on WhatsApp",children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,s.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Share on WhatsApp"]}),(0,s.jsx)("button",{onClick:f,disabled:x,className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Copy quote link to clipboard",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"animate-spin",children:"⏳"}),"Copying..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})}),"Copy Link"]})})]})}},3770:function(e,t,r){r.d(t,{ServiceSelector:function(){return l}});var s=r(9566),a=r(8590),n=r(2518);let l=e=>{let{services:t,selectedServiceIds:r,onToggleService:l,isLoading:i=!1}=e,o=(0,a.useMemo)(()=>{let e=new Map;t.filter(e=>e.isActive).forEach(t=>{let r=t.category||"Uncategorized",s=e.get(r)||[];e.set(r,[...s,t])});let r=Array.from(e.keys()).sort((e,t)=>"Uncategorized"===e?1:"Uncategorized"===t?-1:e.localeCompare(t));return{grouped:e,sortedCategories:r}},[t]),c=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return i?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary",children:"Select Services"}),(0,s.jsx)("div",{className:"p-8 text-center text-text-secondary border border-primary/20 rounded-lg",children:(0,s.jsx)("span",{className:"animate-pulse",children:"\uD83C\uDF83 Loading services..."})})]}):0===t.length?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary",children:"Select Services"}),(0,s.jsxs)("div",{className:"p-8 text-center text-text-secondary border border-primary/20 rounded-lg",children:[(0,s.jsx)("p",{children:"No services available."}),(0,s.jsx)("p",{className:"text-sm mt-1",children:"Add services in the Services page first."})]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-text-primary",children:"Select Services"}),(0,s.jsxs)("span",{className:"text-sm text-text-secondary",children:[r.size," selected"]})]}),(0,s.jsx)("div",{className:"border border-primary/20 rounded-lg divide-y divide-primary/10 max-h-80 overflow-y-auto",children:o.sortedCategories.map(e=>{let t=o.grouped.get(e)||[];return(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsx)("h4",{className:"text-xs font-semibold text-accent uppercase tracking-wider mb-2",children:e}),(0,s.jsx)("div",{className:"space-y-2",children:t.map(e=>{let t=r.has(e.id);return(0,s.jsxs)("label",{className:"\n                        flex items-center justify-between p-2 rounded-lg cursor-pointer\n                        transition-colors\n                        ".concat(t?"bg-primary/20 border border-primary/40":"hover:bg-surface/50 border border-transparent","\n                      "),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(n.Checkbox,{checked:t,onChange:()=>l(e.id)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-text-primary text-sm",children:e.name}),e.description&&(0,s.jsx)("p",{className:"text-xs text-text-muted truncate max-w-xs",children:e.description})]})]}),(0,s.jsx)("span",{className:"text-sm font-medium text-accent",children:c(e.price)})]},e.id)})})]},e)})})]})}},5708:function(e,t,r){r.d(t,{QuoteList:function(){return d}});var s=r(9566),a=r(8590),n=r(846),l=r(7046),i=r(822),o=r(7521);let c=[{label:"All",value:"all"},{label:"Pending",value:"pending"},{label:"Accepted",value:"accepted"},{label:"Rejected",value:"rejected"},{label:"Expired",value:"expired"}],d=e=>{let{quotes:t,loading:r,error:d,onViewQuote:u,onDuplicateQuote:m,onUpdateStatus:x,onRefetch:p,duplicateLoading:h=!1,statusUpdateLoading:g=!1}=e,[f,b]=(0,a.useState)("all"),[y,j]=(0,a.useState)(""),[v,N]=(0,a.useState)(null),w=(0,a.useMemo)(()=>{let e=t;if("all"!==f&&(e=e.filter(e=>e.status===f)),y.trim()){let t=y.toLowerCase().trim();e=e.filter(e=>{var r;return e.quoteNumber.toLowerCase().includes(t)||(null===(r=e.customer)||void 0===r?void 0:r.name.toLowerCase().includes(t))})}return e},[t,f,y]),C=async(e,t)=>{if(x){N(e);try{await x(e,t)}finally{N(null)}}},D=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),k=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return r?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(o.LoadingSpinner,{size:"lg"})}):d?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsxs)("p",{className:"text-red-400 mb-4",children:["\uD83D\uDC7B ",d.message]}),p&&(0,s.jsx)(l.Button,{variant:"secondary",onClick:p,children:"Try Again"})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:(0,s.jsx)("h2",{className:"text-2xl font-bold text-halloween-green",children:"\uD83D\uDCDC Your Quotes"})}),(0,s.jsx)("div",{className:"max-w-md",children:(0,s.jsx)(i.Input,{placeholder:"Search by customer name or quote number...",value:y,onChange:e=>j(e.target.value),className:"w-full"})}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 border-b border-halloween-purple/20 pb-4",children:c.map(e=>(0,s.jsxs)("button",{onClick:()=>b(e.value),className:"\n              px-4 py-2 rounded-lg font-medium transition-all\n              ".concat(f===e.value?"bg-halloween-purple text-white":"bg-surface text-text-muted hover:bg-halloween-purple/20","\n            "),children:[e.label,"all"!==e.value&&(0,s.jsxs)("span",{className:"ml-2 text-xs opacity-70",children:["(",t.filter(t=>t.status===e.value).length,")"]})]},e.value))}),0===w.length?(0,s.jsxs)("div",{className:"text-center py-12 text-text-muted",children:[(0,s.jsx)("p",{className:"text-4xl mb-4",children:"\uD83E\uDD87"}),(0,s.jsx)("p",{children:"No quotes found. Time to conjure some new ones!"})]}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-halloween-purple/20",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 text-text-muted font-medium",children:"Quote #"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-text-muted font-medium",children:"Customer"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-text-muted font-medium",children:"Date"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-text-muted font-medium",children:"Status"}),(0,s.jsx)("th",{className:"text-right py-3 px-4 text-text-muted font-medium",children:"Total"}),(0,s.jsx)("th",{className:"text-right py-3 px-4 text-text-muted font-medium",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:w.map(e=>{var t;return(0,s.jsxs)("tr",{className:"border-b border-halloween-purple/10 hover:bg-halloween-purple/5 transition-colors",children:[(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsx)("span",{className:"font-mono text-halloween-orange",children:e.quoteNumber})}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsx)("span",{className:"text-text",children:(null===(t=e.customer)||void 0===t?void 0:t.name)||"Unknown Customer"})}),(0,s.jsx)("td",{className:"py-4 px-4 text-text-muted",children:D(e.createdAt)}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsx)(n.Badge,{variant:(0,n.getQuoteStatusVariant)(e.status),children:(0,n.formatQuoteStatus)(e.status)})}),(0,s.jsx)("td",{className:"py-4 px-4 text-right font-semibold text-halloween-green",children:k(e.total)}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[u&&(0,s.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>u(e),children:"View"}),m&&(0,s.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:()=>m(e),disabled:h,children:"Duplicate"}),x&&"expired"!==e.status&&(0,s.jsxs)("select",{value:e.status,onChange:t=>C(e.id,t.target.value),disabled:g&&v===e.id,className:" bg-surface border border-halloween-purple/30 rounded-lg px-2 py-1 text-sm text-text focus:outline-none focus:ring-2 focus:ring-halloween-purple/50 disabled:opacity-50 ",children:[(0,s.jsx)("option",{value:"pending",children:"Pending"}),(0,s.jsx)("option",{value:"accepted",children:"Accepted"}),(0,s.jsx)("option",{value:"rejected",children:"Rejected"})]})]})})]},e.id)})})]})}),(0,s.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-halloween-purple/20 text-text-muted text-sm",children:[(0,s.jsxs)("span",{children:["Showing ",w.length," of ",t.length," quotes"]}),"all"!==f&&(0,s.jsx)("button",{onClick:()=>b("all"),className:"text-halloween-purple hover:underline",children:"Clear filter"})]})]})}},4520:function(e,t,r){r.d(t,{ServiceCard:function(){return n}});var s=r(9566);r(8590);var a=r(846);let n=e=>{let t,{service:r,onEdit:n,onDelete:l}=e;return(0,s.jsx)("div",{className:"bg-surface border border-primary/20 rounded-lg p-4 hover:border-primary/40 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("h3",{className:"text-text-primary font-medium truncate",children:r.name}),!r.isActive&&(0,s.jsx)(a.Badge,{variant:"warning",size:"sm",children:"Inactive"})]}),r.description&&(0,s.jsx)("p",{className:"text-text-muted text-sm line-clamp-2 mb-2",children:r.description}),(0,s.jsx)("p",{className:"text-accent font-semibold text-lg",children:(t=r.price,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t))})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>n(r),className:"p-2 rounded-lg hover:bg-primary/10 transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Edit ".concat(r.name),children:(0,s.jsx)("svg",{className:"w-5 h-5 text-text-muted hover:text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,s.jsx)("button",{onClick:()=>l(r),className:"p-2 rounded-lg hover:bg-red-500/10 transition-colors min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":"Delete ".concat(r.name),children:(0,s.jsx)("svg",{className:"w-5 h-5 text-text-muted hover:text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})}},7967:function(e,t,r){r.d(t,{ServiceForm:function(){return d}});var s=r(9566),a=r(8590),n=r(7046),l=r(822),i=r(1655),o=r(3443),c=r(4742);let d=e=>{let{service:t,onSubmit:r,onCancel:d,isLoading:u=!1}=e,[m,x]=(0,a.useState)({name:"",description:"",price:0,category:""}),[p,h]=(0,a.useState)({});(0,a.useEffect)(()=>{t&&x({name:t.name,description:t.description||"",price:t.price,category:t.category||""})},[t]);let g=e=>{let{name:t,value:r}=e.target;x(e=>({...e,[t]:"price"===t?parseFloat(r)||0:r})),p[t]&&h(e=>({...e,[t]:""}))},f=async e=>{e.preventDefault();let t=function(e){try{return c.a6.parse(e),{success:!0,errors:{}}}catch(e){if(e instanceof o.jm){let t={};return e.errors.forEach(e=>{t[e.path.join(".")]=e.message}),{success:!1,errors:t}}return{success:!1,errors:{_form:"Validation failed"}}}}(m);if(!t.success){h(t.errors);return}try{await r(m)}catch(e){h({_form:e instanceof Error?e.message:"Failed to save service"})}};return(0,s.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[p._form&&(0,s.jsx)("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm",children:p._form}),(0,s.jsx)(l.Input,{label:"Service Name",name:"name",value:m.name,onChange:g,error:p.name,placeholder:"e.g., Basic Website Design",required:!0}),(0,s.jsx)(i.TextArea,{label:"Description",name:"description",value:m.description||"",onChange:g,error:p.description,placeholder:"Describe what this service includes...",rows:3}),(0,s.jsx)(l.Input,{label:"Price",name:"price",type:"number",step:"0.01",min:"0.01",value:m.price||"",onChange:g,error:p.price,placeholder:"0.00",required:!0}),(0,s.jsx)(l.Input,{label:"Category",name:"category",value:m.category||"",onChange:g,error:p.category,placeholder:"e.g., Web Design, Photography"}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)(n.Button,{type:"button",variant:"secondary",onClick:d,disabled:u,children:"Cancel"}),(0,s.jsx)(n.Button,{type:"submit",variant:"primary",isLoading:u,className:"flex-1",children:t?"Update Service":"Add Service"})]})]})}},2638:function(e,t,r){r.d(t,{ServiceList:function(){return d}});var s=r(9566),a=r(8590),n=r(4520),l=r(7967),i=r(4202),o=r(7046),c=r(7521);let d=e=>{let{services:t,loading:r,error:d,onCreateService:u,onUpdateService:m,onDeleteService:x,onRefetch:p,createLoading:h=!1,updateLoading:g=!1,deleteLoading:f=!1}=e,[b,y]=(0,a.useState)(!1),[j,v]=(0,a.useState)(null),[N,w]=(0,a.useState)(null),C=a.useMemo(()=>{let e=new Map;return t.filter(e=>e.isActive).forEach(t=>{let r=t.category||"Uncategorized",s=e.get(r)||[];e.set(r,[...s,t])}),new Map(Array.from(e.entries()).sort((e,t)=>"Uncategorized"===e[0]?1:"Uncategorized"===t[0]?-1:e[0].localeCompare(t[0])))},[t]),D=async e=>{await u(e)&&(y(!1),await p())},k=async e=>{j&&await m(j.id,e)&&(v(null),await p())},S=async()=>{N&&await x(N.id)&&(w(null),await p())};return r?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)(c.LoadingSpinner,{customMessage:"Summoning your services..."})}):d?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("p",{className:"text-red-400 mb-4",children:"Something spooky happened! \uD83D\uDC7B"}),(0,s.jsx)("p",{className:"text-text-muted mb-4",children:d.message}),(0,s.jsx)(o.Button,{variant:"secondary",onClick:p,children:"Try Again"})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-text-primary",children:"Services"}),(0,s.jsx)("p",{className:"text-text-muted text-sm",children:"Manage your service offerings and prices"})]}),(0,s.jsx)(o.Button,{variant:"primary",onClick:()=>y(!0),children:"+ Add Service"})]}),0===C.size?(0,s.jsxs)("div",{className:"text-center py-12 bg-surface border border-primary/20 rounded-lg",children:[(0,s.jsx)("p",{className:"text-text-muted mb-4",children:"No services yet. Add your first service to get started!"}),(0,s.jsx)(o.Button,{variant:"primary",onClick:()=>y(!0),children:"+ Add Your First Service"})]}):(0,s.jsx)("div",{className:"space-y-8",children:Array.from(C.entries()).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-medium text-text-primary mb-3 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-accent",children:"\uD83C\uDF83"}),t,(0,s.jsxs)("span",{className:"text-text-muted text-sm font-normal",children:["(",r.length,")"]})]}),(0,s.jsx)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:r.map(e=>(0,s.jsx)(n.ServiceCard,{service:e,onEdit:v,onDelete:w},e.id))})]},t)})}),(0,s.jsx)(i.Modal,{isOpen:b,onClose:()=>y(!1),title:"Add New Service",size:"md",children:(0,s.jsx)(l.ServiceForm,{onSubmit:D,onCancel:()=>y(!1),isLoading:h})}),(0,s.jsx)(i.Modal,{isOpen:!!j,onClose:()=>v(null),title:"Edit Service",size:"md",children:(0,s.jsx)(l.ServiceForm,{service:j,onSubmit:k,onCancel:()=>v(null),isLoading:g})}),(0,s.jsx)(i.Modal,{isOpen:!!N,onClose:()=>w(null),title:"Delete Service",size:"sm",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("p",{className:"text-text-primary",children:["Are you sure you want to delete"," ",(0,s.jsx)("span",{className:"font-semibold",children:null==N?void 0:N.name}),"?"]}),(0,s.jsx)("p",{className:"text-text-muted text-sm",children:"This service will be hidden from future quotes but preserved in existing quotes."}),(0,s.jsxs)("div",{className:"flex gap-3 pt-2",children:[(0,s.jsx)(o.Button,{variant:"secondary",onClick:()=>w(null),disabled:f,children:"Cancel"}),(0,s.jsx)(o.Button,{variant:"primary",onClick:S,isLoading:f,className:"bg-red-600 hover:bg-red-700",children:"Delete Service"})]})]})})]})}},9694:function(e,t,r){r.d(t,{SettingsPage:function(){return p}});var s=r(9566),a=r(8590),n=r(7046),l=r(822),i=r(1655),o=r(1140),c=r(5996),d=r(2638),u=r(4742),m=r(3443);let x=[{id:"business",label:"Business Profile",icon:"\uD83C\uDFE2"},{id:"services",label:"Services",icon:"\uD83D\uDCCB"},{id:"defaults",label:"Quote Defaults",icon:"⚙️"}],p=e=>{let{business:t,onUpdateBusiness:r,onUploadLogo:p,businessLoading:h=!1,businessError:g,serviceListProps:f}=e,[b,y]=(0,a.useState)("business"),[j,v]=(0,a.useState)({name:t.name,phone:t.phone||"",email:t.email||"",address:t.address||"",defaultTerms:t.defaultTerms||"",defaultValidityDays:t.defaultValidityDays}),[N,w]=(0,a.useState)(null),[C,D]=(0,a.useState)(t.logoUrl||null),[k,S]=(0,a.useState)({}),[A,B]=(0,a.useState)(!1),[L,I]=(0,a.useState)(!1),_=(0,a.useCallback)((e,t)=>{v(r=>({...r,[e]:t})),B(!1),k[e]&&S(t=>({...t,[e]:void 0}))},[k]),T=(0,a.useCallback)(()=>{let e={};return j.name.trim()||(e.name="Business name is required"),j.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j.email)&&(e.email="Invalid email format"),(j.defaultValidityDays<1||j.defaultValidityDays>365)&&(e.defaultValidityDays="Validity must be between 1 and 365 days"),S(e),0===Object.keys(e).length},[j]),F=(0,a.useCallback)(e=>{w(e),B(!1);let t=new FileReader;t.onloadend=()=>{D(t.result)},t.readAsDataURL(e)},[]),E=(0,a.useCallback)(async()=>{if(T()){I(!0);try{let e=u.l6.parse(j);N&&(await p(N),w(null)),await r(e)&&(B(!0),setTimeout(()=>B(!1),3e3))}catch(e){if(e instanceof m.jm){let t={};e.errors.forEach(e=>{t[e.path[0]]=e.message}),S(t)}}finally{I(!1)}}},[j,N,r,p,T]),z=(0,a.useCallback)(async()=>{if(T()){I(!0);try{let e=u.l6.parse(j);await r(e)&&(B(!0),setTimeout(()=>B(!1),3e3))}catch(e){if(e instanceof m.jm){let t={};e.errors.forEach(e=>{t[e.path[0]]=e.message}),S(t)}}finally{I(!1)}}},[j,r,T]);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-text-primary",children:"Settings"}),(0,s.jsx)("p",{className:"text-text-muted",children:"Manage your business profile and preferences"})]}),(0,s.jsx)("div",{className:"flex gap-2 p-1 bg-surface rounded-xl border border-primary/20",children:x.map(e=>(0,s.jsxs)("button",{onClick:()=>y(e.id),className:"\n        flex items-center gap-2 px-4 py-3 text-sm font-medium rounded-lg transition-all\n        ".concat(b===e.id?"bg-primary text-white shadow-lg shadow-primary/30":"text-text-muted hover:text-text-primary hover:bg-surface","\n      "),children:[(0,s.jsx)("span",{children:e.icon}),(0,s.jsx)("span",{className:"hidden sm:inline",children:e.label})]},e.id))}),(0,s.jsxs)("div",{children:["business"===b&&(0,s.jsx)(c.Card,{variant:"elevated",padding:"lg",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-text-primary mb-1",children:"Business Profile"}),(0,s.jsx)("p",{className:"text-text-muted text-sm",children:"Update your business information that appears on quotes"})]}),g&&(0,s.jsx)("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-500 text-sm",children:g.message}),A&&(0,s.jsx)("div",{className:"p-3 bg-green-500/10 border border-green-500/30 rounded-lg text-green-400 text-sm",children:"✓ Changes saved successfully!"}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsx)(l.Input,{label:"Business Name *",placeholder:"Enter your business name",value:j.name,onChange:e=>_("name",e.target.value),error:k.name}),(0,s.jsx)(l.Input,{label:"Phone Number",placeholder:"Enter your phone number",type:"tel",value:j.phone||"",onChange:e=>_("phone",e.target.value),error:k.phone})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsx)(l.Input,{label:"Email Address",placeholder:"Enter your email",type:"email",value:j.email||"",onChange:e=>_("email",e.target.value),error:k.email}),(0,s.jsx)("div",{className:"sm:col-span-2",children:(0,s.jsx)(i.TextArea,{label:"Business Address",placeholder:"Enter your business address",value:j.address||"",onChange:e=>_("address",e.target.value),rows:2})})]}),(0,s.jsx)("div",{children:(0,s.jsx)(o.FileUpload,{label:"Business Logo",accept:"image/png,image/jpeg,image/jpg",maxSize:2097152,onFileSelect:F,preview:C,hint:"PNG or JPG, max 2MB"})}),(0,s.jsx)("div",{className:"flex justify-end pt-4 border-t border-primary/10",children:(0,s.jsx)(n.Button,{onClick:E,isLoading:L||h,children:"Save Changes"})})]})}),"services"===b&&(0,s.jsx)(c.Card,{variant:"elevated",padding:"lg",children:(0,s.jsx)(d.ServiceList,{...f,onRefetch:f.onRefetch})}),"defaults"===b&&(0,s.jsx)(c.Card,{variant:"elevated",padding:"lg",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-text-primary mb-1",children:"Default Quote Settings"}),(0,s.jsx)("p",{className:"text-text-muted text-sm",children:"Configure default values for new quotes"})]}),A&&(0,s.jsx)("div",{className:"p-3 bg-green-500/10 border border-green-500/30 rounded-lg text-green-400 text-sm",children:"✓ Changes saved successfully!"}),(0,s.jsx)(i.TextArea,{label:"Default Terms & Conditions",placeholder:"Enter your standard terms and conditions...",value:j.defaultTerms||"",onChange:e=>_("defaultTerms",e.target.value),rows:6,hint:"These will be pre-filled on new quotes"}),(0,s.jsx)(l.Input,{label:"Default Quote Validity (days)",type:"number",min:1,max:365,value:j.defaultValidityDays,onChange:e=>_("defaultValidityDays",parseInt(e.target.value)||7),error:k.defaultValidityDays,hint:"How long quotes are valid by default (1-365 days)"}),(0,s.jsx)("div",{className:"flex justify-end pt-4 border-t border-primary/10",children:(0,s.jsx)(n.Button,{onClick:z,isLoading:L||h,children:"Save Defaults"})})]})})]})]})}},7046:function(e,t,r){r.d(t,{Button:function(){return i}});var s=r(9566),a=r(8590);let n={primary:"bg-primary text-white hover:bg-primary/90 focus:ring-primary/50 shadow-lg shadow-primary/25",secondary:"bg-surface text-text-primary border border-primary/30 hover:bg-primary/10 focus:ring-primary/30",ghost:"bg-transparent text-text-primary hover:bg-surface focus:ring-primary/20"},l={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},i=(0,a.forwardRef)((e,t)=>{let{variant:r="primary",size:a="md",isLoading:i=!1,disabled:o,className:c="",children:d,...u}=e;return(0,s.jsx)("button",{ref:t,disabled:o||i,className:"".concat("inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 disabled:opacity-50 disabled:cursor-not-allowed min-w-[44px] min-h-[44px]"," ").concat(n[r]," ").concat(l[a]," ").concat(c),...u,children:i?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{children:"Loading..."})]}):d})});i.displayName="Button"},5996:function(e,t,r){r.d(t,{Card:function(){return l},CardContent:function(){return c},CardFooter:function(){return d},CardHeader:function(){return i},CardTitle:function(){return o}});var s=r(9566);r(8590);let a={default:"bg-surface border border-primary/20",elevated:"bg-surface shadow-lg shadow-primary/10",outlined:"bg-transparent border-2 border-primary/30"},n={none:"",sm:"p-3",md:"p-4",lg:"p-6"},l=e=>{let{variant:t="default",padding:r="md",className:l="",children:i,...o}=e;return(0,s.jsx)("div",{className:"".concat("rounded-xl transition-all duration-200"," ").concat(a[t]," ").concat(n[r]," ").concat(l),...o,children:i})},i=e=>{let{className:t="",children:r,...a}=e;return(0,s.jsx)("div",{className:"mb-4 ".concat(t),...a,children:r})},o=e=>{let{className:t="",children:r,...a}=e;return(0,s.jsx)("h3",{className:"text-lg font-semibold text-text-primary ".concat(t),...a,children:r})},c=e=>{let{className:t="",children:r,...a}=e;return(0,s.jsx)("div",{className:"text-text-muted ".concat(t),...a,children:r})},d=e=>{let{className:t="",children:r,...a}=e;return(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-primary/10 ".concat(t),...a,children:r})}},2518:function(e,t,r){r.d(t,{Checkbox:function(){return a}});var s=r(9566);let a=(0,r(8590).forwardRef)((e,t)=>{let{label:r,error:a,className:n="",id:l,...i}=e,o=l||(null==r?void 0:r.toLowerCase().replace(/\s+/g,"-"));return(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("label",{htmlFor:o,className:"flex items-center gap-3 cursor-pointer min-h-[44px]",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{ref:t,type:"checkbox",id:o,className:"peer w-5 h-5 bg-surface border border-primary/30 rounded appearance-none cursor-pointer transition-all duration-200 checked:bg-primary checked:border-primary focus:outline-none focus:ring-2 focus:ring-primary/50 ".concat(n),"aria-invalid":!!a,...i}),(0,s.jsx)("svg",{className:"absolute top-0.5 left-0.5 w-4 h-4 text-white opacity-0 peer-checked:opacity-100 pointer-events-none transition-opacity duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})]}),r&&(0,s.jsx)("span",{className:"text-sm text-text-primary select-none",children:r})]}),a&&(0,s.jsx)("span",{className:"text-sm text-red-500 ml-8",role:"alert",children:a})]})});a.displayName="Checkbox"},1140:function(e,t,r){r.d(t,{FileUpload:function(){return n}});var s=r(9566),a=r(8590);let n=e=>{let{label:t,accept:r="image/png,image/jpeg,image/jpg",maxSize:n=2097152,error:l,hint:i,onFileSelect:o,preview:c,disabled:d=!1}=e,u=(0,a.useRef)(null),[m,x]=(0,a.useState)(!1),[p,h]=(0,a.useState)(null),g=(0,a.useCallback)(e=>{if(!r.split(",").map(e=>e.trim()).includes(e.type))return"Invalid file type. Please upload PNG or JPG.";if(e.size>n){let e=Math.round(n/1048576);return"File too large. Maximum size is ".concat(e,"MB.")}return null},[r,n]),f=(0,a.useCallback)(e=>{let t=g(e);if(t){h(t);return}h(null),o(e)},[g,o]),b=(0,a.useCallback)(e=>{if(e.preventDefault(),x(!1),d)return;let t=e.dataTransfer.files[0];t&&f(t)},[d,f]),y=(0,a.useCallback)(e=>{e.preventDefault(),d||x(!0)},[d]),j=(0,a.useCallback)(()=>{x(!1)},[]),v=l||p;return(0,s.jsxs)("div",{className:"flex flex-col gap-1.5",children:[t&&(0,s.jsx)("label",{className:"text-sm font-medium text-text-primary",children:t}),(0,s.jsxs)("div",{onClick:()=>{var e;d||null===(e=u.current)||void 0===e||e.click()},onDrop:b,onDragOver:y,onDragLeave:j,className:"\n          relative flex flex-col items-center justify-center\n          w-full min-h-[150px] p-4\n          border-2 border-dashed rounded-lg\n          transition-all duration-200 cursor-pointer\n          ".concat(m?"border-primary bg-primary/10":v?"border-red-500 bg-red-500/5":"border-primary/30 hover:border-primary/50 hover:bg-surface","\n          ").concat(d?"opacity-50 cursor-not-allowed":"","\n        "),children:[(0,s.jsx)("input",{ref:u,type:"file",accept:r,onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&f(r)},disabled:d,className:"hidden"}),c?(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,s.jsx)("img",{src:c,alt:"Preview",className:"max-h-24 max-w-full object-contain rounded"}),(0,s.jsx)("span",{className:"text-sm text-text-muted",children:"Click or drag to replace"})]}):(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2 text-center",children:[(0,s.jsx)("div",{className:"text-3xl",children:"\uD83D\uDCC1"}),(0,s.jsx)("span",{className:"text-sm text-text-primary font-medium",children:"Click to upload or drag and drop"}),(0,s.jsxs)("span",{className:"text-xs text-text-muted",children:["PNG or JPG (max ",Math.round(n/1048576),"MB)"]})]})]}),v&&(0,s.jsx)("span",{className:"text-sm text-red-500",role:"alert",children:v}),i&&!v&&(0,s.jsx)("span",{className:"text-sm text-text-muted",children:i})]})}},822:function(e,t,r){r.d(t,{Input:function(){return a}});var s=r(9566);let a=(0,r(8590).forwardRef)((e,t)=>{let{label:r,error:a,hint:n,className:l="",id:i,...o}=e,c=i||(null==r?void 0:r.toLowerCase().replace(/\s+/g,"-")),d=a?"border-red-500 focus:ring-red-500/50 focus:border-red-500":"border-primary/30 focus:ring-primary/50 focus:border-primary";return(0,s.jsxs)("div",{className:"flex flex-col gap-1.5",children:[r&&(0,s.jsx)("label",{htmlFor:c,className:"text-sm font-medium text-text-primary",children:r}),(0,s.jsx)("input",{ref:t,id:c,className:"".concat("w-full px-4 py-2 bg-surface border rounded-lg text-text-primary placeholder:text-text-muted transition-all duration-200 focus:outline-none focus:ring-2 min-h-[44px]"," ").concat(d," ").concat(l),"aria-invalid":!!a,"aria-describedby":a?"".concat(c,"-error"):n?"".concat(c,"-hint"):void 0,...o}),a&&(0,s.jsx)("span",{id:"".concat(c,"-error"),className:"text-sm text-red-500",role:"alert",children:a}),n&&!a&&(0,s.jsx)("span",{id:"".concat(c,"-hint"),className:"text-sm text-text-muted",children:n})]})});a.displayName="Input"},1528:function(e,t,r){r.d(t,{Select:function(){return a}});var s=r(9566);let a=(0,r(8590).forwardRef)((e,t)=>{let{label:r,error:a,hint:n,options:l,placeholder:i,className:o="",id:c,...d}=e,u=c||(null==r?void 0:r.toLowerCase().replace(/\s+/g,"-")),m=a?"border-red-500 focus:ring-red-500/50 focus:border-red-500":"border-primary/30 focus:ring-primary/50 focus:border-primary";return(0,s.jsxs)("div",{className:"flex flex-col gap-1.5",children:[r&&(0,s.jsx)("label",{htmlFor:u,className:"text-sm font-medium text-text-primary",children:r}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{ref:t,id:u,className:"".concat("w-full px-4 py-2 bg-surface border rounded-lg text-text-primary transition-all duration-200 focus:outline-none focus:ring-2 min-h-[44px] appearance-none cursor-pointer"," ").concat(m," ").concat(o),"aria-invalid":!!a,"aria-describedby":a?"".concat(u,"-error"):n?"".concat(u,"-hint"):void 0,...d,children:[i&&(0,s.jsx)("option",{value:"",disabled:!0,children:i}),l.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-text-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),a&&(0,s.jsx)("span",{id:"".concat(u,"-error"),className:"text-sm text-red-500",role:"alert",children:a}),n&&!a&&(0,s.jsx)("span",{id:"".concat(u,"-hint"),className:"text-sm text-text-muted",children:n})]})});a.displayName="Select"},1655:function(e,t,r){r.d(t,{TextArea:function(){return a}});var s=r(9566);let a=(0,r(8590).forwardRef)((e,t)=>{let{label:r,error:a,hint:n,className:l="",id:i,rows:o=4,...c}=e,d=i||(null==r?void 0:r.toLowerCase().replace(/\s+/g,"-")),u=a?"border-red-500 focus:ring-red-500/50 focus:border-red-500":"border-primary/30 focus:ring-primary/50 focus:border-primary";return(0,s.jsxs)("div",{className:"flex flex-col gap-1.5",children:[r&&(0,s.jsx)("label",{htmlFor:d,className:"text-sm font-medium text-text-primary",children:r}),(0,s.jsx)("textarea",{ref:t,id:d,rows:o,className:"".concat("w-full px-4 py-2 bg-surface border rounded-lg text-text-primary placeholder:text-text-muted transition-all duration-200 focus:outline-none focus:ring-2 resize-y min-h-[100px]"," ").concat(u," ").concat(l),"aria-invalid":!!a,"aria-describedby":a?"".concat(d,"-error"):n?"".concat(d,"-hint"):void 0,...c}),a&&(0,s.jsx)("span",{id:"".concat(d,"-error"),className:"text-sm text-red-500",role:"alert",children:a}),n&&!a&&(0,s.jsx)("span",{id:"".concat(d,"-hint"),className:"text-sm text-text-muted",children:n})]})});a.displayName="TextArea"},6143:function(e,t,r){r.d(t,{a:function(){return n}});var s=r(8590),a=r(5001);function n(){let[e,t]=(0,s.useState)({user:null,loading:!0,error:null}),r=(0,s.useMemo)(()=>(0,a.AY)(),[]);(0,s.useEffect)(()=>{if(!r){t(e=>({...e,loading:!1}));return}(async()=>{try{let{data:{session:e},error:s}=await r.auth.getSession();if(s)throw s;t(t=>{var r;return{...t,user:null!==(r=null==e?void 0:e.user)&&void 0!==r?r:null,loading:!1}})}catch(e){t(t=>({...t,error:e,loading:!1}))}})();let{data:{subscription:e}}=r.auth.onAuthStateChange((e,r)=>{t(e=>{var t;return{...e,user:null!==(t=null==r?void 0:r.user)&&void 0!==t?t:null,loading:!1}})});return()=>{e.unsubscribe()}},[r]);let n=(0,s.useCallback)(async()=>{if(r){t(e=>({...e,loading:!0,error:null}));try{let{error:e}=await r.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(e)throw e}catch(e){t(t=>({...t,error:e,loading:!1}))}}},[r]),l=(0,s.useCallback)(async(e,s)=>{if(r){t(e=>({...e,loading:!0,error:null}));try{let{error:t}=await r.auth.signInWithPassword({email:e,password:s});if(t)throw t}catch(e){t(t=>({...t,error:e,loading:!1}))}}},[r]),i=(0,s.useCallback)(async(e,s)=>{if(r){t(e=>({...e,loading:!0,error:null}));try{let{error:t}=await r.auth.signUp({email:e,password:s,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});if(t)throw t}catch(e){t(t=>({...t,error:e,loading:!1}))}}},[r]),o=(0,s.useCallback)(async()=>{if(r){t(e=>({...e,loading:!0,error:null}));try{let{error:e}=await r.auth.signOut();if(e)throw e;t(e=>({...e,user:null,loading:!1}))}catch(e){t(t=>({...t,error:e,loading:!1}))}}},[r]),c=(0,s.useCallback)(()=>{t(e=>({...e,error:null}))},[]);return{...e,signInWithGoogle:n,signInWithEmail:l,signUpWithEmail:i,signOut:o,clearError:c}}},5001:function(e,t,r){r.d(t,{AY:function(){return l}});var s=r(2792),a=r(3544);let n=null;function l(){if(n)return n;let e=a.env.NEXT_PUBLIC_SUPABASE_URL,t=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;return e&&t?n=(0,s.eI)(e,t):(console.error("Missing Supabase environment variables: NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are required"),null)}},4742:function(e,t,r){r.d(t,{_K:function(){return u},a6:function(){return d},l6:function(){return c}});var s=r(9425);s.Ry({id:s.Z_().uuid(),userId:s.Z_().uuid(),name:s.Z_().min(1,"Business name is required"),logoUrl:s.Z_().url().optional().nullable(),phone:s.Z_().optional().nullable(),email:s.Z_().email("Invalid email format").optional().nullable(),address:s.Z_().optional().nullable(),defaultTerms:s.Z_().optional().nullable(),defaultValidityDays:s.Rx().int().min(1).default(7),createdAt:s.oQ.date(),updatedAt:s.oQ.date()}).omit({id:!0,createdAt:!0,updatedAt:!0}).partial().omit({userId:!0}),s.Ry({id:s.Z_().uuid(),businessId:s.Z_().uuid(),name:s.Z_().min(1,"Service name is required"),description:s.Z_().optional().nullable(),price:s.Rx().positive("Price must be a positive number"),category:s.Z_().optional().nullable(),isActive:s.O7().default(!0),createdAt:s.oQ.date(),updatedAt:s.oQ.date()}).omit({id:!0,createdAt:!0,updatedAt:!0}).partial().omit({businessId:!0});let a=s.Ry({id:s.Z_().uuid(),businessId:s.Z_().uuid(),name:s.Z_().min(1,"Customer name is required"),phone:s.Z_().min(1,"Phone number is required"),email:s.Z_().email("Invalid email format").optional().nullable(),address:s.Z_().optional().nullable(),createdAt:s.oQ.date(),updatedAt:s.oQ.date()});a.omit({id:!0,createdAt:!0,updatedAt:!0}).partial().omit({businessId:!0});let n=s.Km(["pending","accepted","rejected","expired"]),l=s.Ry({id:s.Z_().uuid(),quoteId:s.Z_().uuid(),serviceId:s.Z_().uuid().optional().nullable(),serviceName:s.Z_().min(1,"Service name is required"),quantity:s.Rx().int().positive("Quantity must be a positive integer"),unitPrice:s.Rx().nonnegative("Unit price must be non-negative"),totalPrice:s.Rx().nonnegative("Total price must be non-negative"),createdAt:s.oQ.date()});l.omit({id:!0,quoteId:!0,createdAt:!0});let i=s.Km(["percentage","fixed"]);s.Ry({id:s.Z_().uuid(),businessId:s.Z_().uuid(),customerId:s.Z_().uuid().optional().nullable(),quoteNumber:s.Z_().regex(/^QQ-\d{4}-\d{3,}$/,"Invalid quote number format"),status:n.default("pending"),subtotal:s.Rx().nonnegative("Subtotal must be non-negative"),discountType:i.optional().nullable(),discountValue:s.Rx().nonnegative("Discount value must be non-negative").default(0),total:s.Rx().nonnegative("Total must be non-negative"),notes:s.Z_().optional().nullable(),terms:s.Z_().optional().nullable(),validUntil:s.oQ.date().optional().nullable(),createdAt:s.oQ.date(),updatedAt:s.oQ.date(),customer:s.Vo(()=>a).optional(),items:s.IX(s.Vo(()=>l)).optional()}).omit({id:!0,quoteNumber:!0,createdAt:!0,updatedAt:!0,customer:!0,items:!0}).partial().omit({businessId:!0});let o=e=>s.Z_().refine(e=>e.trim().length>0,{message:"".concat(e," is required")}),c=s.Ry({name:o("Business name").pipe(s.Z_().max(255)),phone:s.Z_().max(50).optional(),email:s.Z_().email("Invalid email format").max(255).optional().or(s.i0("")),address:s.Z_().optional(),defaultTerms:s.Z_().optional(),defaultValidityDays:s.Rx().int().min(1).max(365).default(7)}),d=s.Ry({name:o("Service name").pipe(s.Z_().max(255)),description:s.Z_().optional(),price:s.Rx().positive("Price must be a positive number"),category:s.Z_().max(100).optional()}),u=s.Ry({name:o("Customer name").pipe(s.Z_().max(255)),phone:o("Phone number").pipe(s.Z_().max(50)),email:s.Z_().email("Invalid email format").max(255).optional().or(s.i0("")),address:s.Z_().optional()})}}]);